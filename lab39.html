<!-- lab039.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 039</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet" />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a href="https://github.com/vonds/exit_0" target="_blank">
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="https://github.com/vonds/sentinel" target="_blank">
                    Sentinel
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank">exit_0 Documentation</a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 39: Managing Processes with kill
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Identify a runaway process and terminate it safely using SIGTERM first, then escalate to SIGKILL only when required.
                Verify the outcome by confirming the PID no longer exists and document the evidence that justified the termination.
              </p>

              <!-- Video (kept on page; removed from left panel) -->
              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/uJk54bhaadA?si=seGSukCoMFN7ohRo"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">troubleshooting</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">core</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">services</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>

                <p>
                  A script named <code>rogue.sh</code> is consuming nearly all CPU and causing performance issues for other users.
                  You need to locate the offending process, attempt a graceful shutdown, confirm it exited, then repeat the test and
                  force-stop it with <code>SIGKILL</code> if it refuses to terminate.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    Default to graceful termination. <code>SIGTERM</code> allows cleanup and state preservation.
                    Use <code>SIGKILL</code> only when the process is non-responsive and you have accepted the blast radius.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>
                    Identify the PID for the process running <code>rogue.sh</code>.
                  </li>
                  <li>
                    Send a graceful termination request using the default <code>kill</code> behavior (<code>SIGTERM</code>).
                  </li>
                  <li>
                    Verify the PID is gone using PID and name-based checks.
                  </li>
                  <li>
                    Restart the workload in the background and capture the new PID.
                  </li>
                  <li>
                    Force-stop the workload with <code>SIGKILL</code> when required and verify again.
                  </li>
                </ul>
              </section>

              <!-- Concepts (no alt-background moving forward) -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    Signals are a control interface: “request” termination versus “enforce” termination.
                  </li>
                  <li>
                    PID targeting: kill the exact process you intend to stop, not a look-alike match.
                  </li>
                  <li>
                    Verification is mandatory: confirm the PID is gone and confirm the name is gone.
                  </li>
                  <li>
                    Escalation discipline: use <code>SIGKILL</code> only when a graceful stop fails.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Locate the rogue process and capture its PID.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Commands</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">ps aux | grep rogue.sh
# OR
pgrep -a rogue.sh</code></pre>
                  </div>

                  <p>
                    Use <code>ps</code> when you need full context (CPU, memory, user, TTY). Use <code>pgrep -a</code> when you
                    want the PID plus command line without scrolling.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>user     4012  99.0  0.1  50000  3000 pts/0    R    13:24   0:45 bash rogue.sh</code></pre>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : Send a graceful termination request (SIGTERM).
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">kill 4012</code></pre>
                  </div>

                  <p>
                    By default, <code>kill</code> sends <code>SIGTERM</code>. This asks the process to exit cleanly and is the
                    correct first action for most runaway workloads.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Expected result:
# No output is common. The process should exit shortly after.</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Verify the process is gone.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Commands</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">ps -p 4012
pgrep rogue.sh</code></pre>
                  </div>

                  <p>
                    Confirm PID and name-based absence. <code>ps -p</code> verifies the exact PID. <code>pgrep</code> verifies no
                    matching processes remain.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Expected result:
# ps: no row for the PID
# pgrep: no matches and a non-zero exit status</code></pre>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Restart the workload in the background and capture the new PID.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Commands</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4">bash rogue.sh &amp;
# OR
./rogue.sh &amp;</code></pre>
                  </div>

                  <p>
                    Background execution returns control to the shell and prints the job number and PID. Capture the PID so you can
                    target it precisely during escalation.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>[1] 4021
user     4021  95.0  0.1  50000  3000 pts/0    R    13:29   0:02 bash rogue.sh</code></pre>
                  </div>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>
                    : Escalate to a forced stop (SIGKILL) and verify again.
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Safety note</div>
                    <p class="m-b-0">
                      <code>SIGKILL</code> cannot be handled or ignored. The process gets no cleanup time, which can risk partial
                      writes or locked resources depending on workload. Use it only when graceful termination fails.
                    </p>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">kill -9 4021</code></pre>
                  </div>

                  <p>
                    <code>-9</code> sends <code>SIGKILL</code> immediately. Follow up with verification to confirm the process is
                    gone and does not respawn under a supervisor.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>ps -p 4021
pgrep rogue.sh</code></pre>
                  </div>
                </div>
              </section>

              <!-- Common breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">grep matches grep</div>
                  <p class="m-b-0">
                    Your filter may include the <code>grep</code> command itself. Treat that match as noise and identify the long-lived
                    process row that contains the real workload.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">SIGTERM does not stop the process</div>
                  <p class="m-b-0">
                    Give it a moment and verify again. If the PID persists and CPU remains high, escalate to <code>SIGKILL</code> only
                    after confirming you are targeting the correct PID.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Process disappears then returns</div>
                  <p class="m-b-0">
                    A supervisor may be restarting it (systemd, cron, a wrapper script). Identify the parent process and ownership,
                    then stop the controlling service or job rather than repeatedly killing children.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">kill -9 still does not work</div>
                  <p class="m-b-0">
                    The process may be stuck in uninterruptible sleep (often I/O). At that point, <code>SIGKILL</code> will not take
                    effect until the kernel returns the task from the blocked state. Collect evidence and check system I/O pressure.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  This lab changes state only by starting and stopping a test workload. Cleanup is confirming the workload is not
                  running and you have a record of the PID(s) you targeted and the signals you used.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button
                      class="lab-copy-btn"
                      type="button"
                      data-copy="#cmd-cleanup"
                    >
                      Copy
                    </button>
                  </div>
                  <pre><code id="cmd-cleanup">pgrep -a rogue.sh
ps aux | grep rogue.sh</code></pre>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Success signal</div>
                  <p class="m-b-0">
                    No matching processes remain, and you can explain why you used <code>SIGTERM</code> first and why escalation to
                    <code>SIGKILL</code> was or was not justified.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>ps aux</code>
                    : BSD-style process listing with CPU and memory columns for quick triage.
                    <ul>
                      <li><code>a</code> : Shows processes for all users.</li>
                      <li><code>u</code> : User-oriented format (adds USER, %CPU, %MEM, and related columns).</li>
                      <li><code>x</code> : Includes processes without a controlling TTY.</li>
                    </ul>
                  </li>

                  <li>
                    <code>grep &lt;pattern&gt;</code>
                    : Filters lines matching a pattern (commonly used to narrow process output).
                  </li>

                  <li>
                    <code>ps -p &lt;pid&gt;</code>
                    : Checks whether a specific PID still exists.
                    <ul>
                      <li>
                        <code>-p &lt;pid&gt;</code>
                        : Selects the target PID for display.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>pgrep &lt;pattern&gt;</code>
                    : Prints PIDs of matching processes.
                  </li>

                  <li>
                    <code>pgrep -a &lt;pattern&gt;</code>
                    : Prints matching PIDs and their full command line.
                    <ul>
                      <li>
                        <code>-a</code>
                        : Shows the full command line for each match.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>kill &lt;pid&gt;</code>
                    : Sends a signal to a PID (default is <code>SIGTERM</code>).
                    <ul>
                      <li>
                        Default signal:
                        <code>SIGTERM</code>
                        (15) requests a clean shutdown.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>kill -9 &lt;pid&gt;</code>
                    : Sends <code>SIGKILL</code> (forced stop, no cleanup).
                    <ul>
                      <li>
                        <code>-9</code>
                        : Uses signal 9 (<code>SIGKILL</code>) to terminate immediately.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>bash &lt;script&gt; &amp;</code>
                    : Runs a script in the background and returns control to the shell.
                    <ul>
                      <li>
                        <code>&lt;script&gt;</code>
                        : Script name (for example <code>rogue.sh</code>).
                      </li>
                      <li>
                        <code>&amp;</code>
                        : Runs the command in the background.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>./&lt;script&gt; &amp;</code>
                    : Runs an executable script from the current directory in the background.
                    <ul>
                      <li>
                        <code>./</code>
                        : Executes a file from the current directory.
                      </li>
                      <li>
                        <code>&lt;script&gt;</code>
                        : Executable script name (for example <code>rogue.sh</code>).
                      </li>
                      <li>
                        <code>&amp;</code>
                        : Runs the command in the background.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>|</code>
                    : Pipes output from the left command into the right command.
                  </li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy;
                <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.css"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear()
    </script>
  </body>
</html>
