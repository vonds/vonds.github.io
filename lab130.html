<!-- lab130.html -->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="exit_0 Documentation" />
	<meta name="name" content="Vonds" />

	<title>Vonds | Lab 130</title>

	<!-- Favicons -->
	<link rel="shortcut icon" href="../assets/images/favicon.png" />
	<link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/images/apple-touch-icon-114x114.png" />

	<!-- Site styles (your existing) -->
	<link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
	<link href="../assets/css/linea-icons.css" rel="stylesheet" />
	<link href="../assets/css/ionicons.min.css" rel="stylesheet" />
	<link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
	<link href="../assets/css/magnific-popup.css" rel="stylesheet" />
	<link href="../assets/css/owl.carousel.css" rel="stylesheet" />
	<link href="../assets/css/superslides.css" rel="stylesheet" />
	<link href="../assets/css/vertical.css" rel="stylesheet" />
	<link href="../assets/css/animate.css" rel="stylesheet" />
	<link href="../assets/css/style.css" rel="stylesheet" />
	<link href="../assets/css/docs.css" rel="stylesheet" />

	<!-- Lab page styles (new) -->
	<link href="../assets/css/lab.css" rel="stylesheet" />

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet" />
</head>

<body>
	<!-- PRELOADER -->
	<div class="page-loader">
		<div class="loader">Loading...</div>
	</div>

	<!-- OVERLAY MENU -->
	<div id="overlay-menu" class="overlay-menu">
		<a href="#" id="overlay-menu-hide" class="navigation-hide">
			<i class="ion-close-round"></i>
		</a>

		<div class="overlay-menu-inner">
			<nav class="overlay-menu-nav">
				<ul id="nav">
					<li><a href="../index.html">Home</a></li>

					<li class="slidedown">
						<a href="#">Portfolio</a>
						<ul>
							<li>
								<a href="https://github.com/vonds/exit_0" target="_blank" rel="noopener">
									exit_0
								</a>
							</li>
							<li>
								<a href="docs.html" target="_blank" rel="noopener">
									exit_0 Documentation
								</a>
							</li>
							<li><a href="https://github.com/vonds/sentinel" target="_blank" rel="noopener">Sentinel</a></li>
						</ul>
					</li>

					<li>
						<a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
							LinkedIn
						</a>
					</li>
					<li>
						<a href="https://github.com/vonds" target="_blank" rel="noopener">
							Github
						</a>
					</li>
					<li>
						<a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
					</li>
				</ul>
			</nav>
		</div>

		<div class="overlay-navigation-footer">
			<div class="container">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p class="copyright font-alt m-b-0">
							VONDS &copy;
							<script>
								document.write(new Date().getFullYear())
							</script>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- WRAPPER -->
	<div class="wrapper">
		<!-- NAVIGATION -->
		<nav class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="../index.html">
						<img src="../assets/images/logo-dark.png" width="95" alt="" />
					</a>
				</div>

				<ul id="icons-navbar" class="nav navbar-nav navbar-right">
					<li>
						<a href="#" id="toggle-menu" class="show-overlay" title="Menu">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- DOCS PAGE -->
		<section class="module">
			<div class="container">
				<h2 class="font-alt module-title m-t-60">
					Lab 130: Networking Fundamentals — Restore Connectivity
				</h2>
				<nav class="lab-pagination">
					<a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">
						&laquo;
					</a>
					<a id="next-lab" class="lab-nav-link" href="#" aria-label="Next lab">
						&raquo;
					</a>
				</nav>
				<div class="row">
					<!-- LEFT SIDEBAR -->
					<div class="col-sm-4 col-md-3 lab-sidebar">
						<div class="docs-sidebar">
							<div class="docs-widget">
								<h5 class="widget-title">
									<a href="./docs.html">Lab Index</a>
								</h5>
								<ul class="docs-nav">
									<li><a href="#scenario">Scenario</a></li>

									<li><a href="#walkthrough">Walkthrough</a></li>
									<li><a href="#reference">Reference</a></li>
								</ul>
							</div>
						</div>
					</div>

					<!-- MAIN CONTENT -->
					<div class="col-sm-8 col-md-9 lab-doc">
						<!-- 1) Title + Summary (2 sentences max) -->
						<p class="m-b-20 lab-summary">
							Restore outbound connectivity and name resolution when the host can reach the gateway but DNS lookups fail.
							Validate interface state, detect a missing default route, fix routing, correct DNS via NetworkManager, then verify HTTP access.
						</p>

						<section class="lab-section" id="video" aria-label="Lab video">
							<div class="lab-video">
								<div class="lab-video-embed text-center">
									<iframe src="https://www.youtube.com/embed/uJk54bhaadA?si=seGSukCoMFN7ohRo"
										title="YouTube video player" frameborder="0"
										allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
										referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
								</div>
							</div>
						</section>

						<!-- 2) Scenario -->
						<section class="lab-section" id="scenario">
							<div class="lab-chips" aria-label="Tags">
								<span class="lab-chip">
									<span class="lab-chip-key">networking</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">troubleshooting</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">core</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">dns</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">routing</span>
								</span>
							</div>

							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Scenario
							</h3>
							<p>
								A VM on a training network reports: “I can ping the gateway, but DNS names fail.” You have console access and must confirm IP configuration,
								confirm routing, confirm DNS, fix the issue, and verify internet access.
							</p>
							<div class="lab-callout">
								<div class="lab-callout-label">Network facts</div>
								<p class="m-b-0">
									Interface:
									<code>eth0</code>
									. Expected gateway:
									<code>10.0.2.2</code>
									. Expected DNS server:
									<code>10.0.2.3</code>
									. Test site:
									<code>http://example.com</code>
									.
								</p>
							</div>
						</section>

						<!-- 3) Objective -->
						<section class="lab-section alt-background" id="objective">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Objective
							</h3>
							<ul>
								<li>
									Confirm
									<code>eth0</code>
									has an IPv4 address and is up.
								</li>
								<li>
									Prove reachability to the gateway
									<code>10.0.2.2</code>
									.
								</li>
								<li>
									Inspect the routing table and detect a missing default route.
								</li>
								<li>
									Add the correct default route and verify internet reachability by IP.
								</li>
								<li>
									Inspect resolver configuration and detect an incorrect DNS server.
								</li>
								<li>
									Set DNS to
									<code>10.0.2.3</code>
									via NetworkManager and verify name resolution and HTTP access.
								</li>
							</ul>
						</section>

						<!-- 4) What You'll Practice -->
						<section class="lab-section" id="practice">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								What You’ll Practice
							</h3>

							<ul class="m-t-10">
								<li>
									Interface and IP inspection using
									<code>ip addr</code>
									.
								</li>
								<li>
									Gateway reachability testing using
									<code>ping</code>
									.
								</li>
								<li>
									Route inspection and correction using
									<code>ip route</code>
									.
								</li>
								<li>
									DNS verification using
									<code>resolvectl</code>
									or
									<code>/etc/resolv.conf</code>
									.
								</li>
								<li>
									NetworkManager DNS configuration using
									<code>nmcli</code>
									.
								</li>
								<li>
									End-to-end verification using
									<code>getent</code>
									,
									<code>dig</code>
									, or
									<code>curl</code>
									.
								</li>
							</ul>
						</section>

						<!-- 5) Commands Walkthrough -->
						<section class="lab-section alt-background" id="walkthrough">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Walkthrough
							</h3>

							<!-- Step 1 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 1</strong>
									: Confirm eth0 has an IPv4 address.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-1">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-1">ip addr show eth0
# (alias)
ip a show eth0</code></pre>
								</div>

								<p>
									This confirms link state and L3 addressing. If the interface has no IPv4 address, DNS troubleshooting is premature.
									You need working local addressing and a valid subnet first.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-1">inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0</code></pre>
								</div>
							</div>

							<!-- Step 2 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 2</strong>
									: Verify you can reach the gateway (10.0.2.2).
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-2">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-2">ping -c 2 10.0.2.2</code></pre>
								</div>

								<p>
									If you can ping the gateway, you’ve proven basic L2/L3 connectivity on the local network. At that point, failures to reach the internet
									are commonly routing or policy related, not “the NIC is down.”
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-2">2 packets transmitted, 2 received, 0% packet loss</code></pre>
								</div>
							</div>

							<!-- Step 3 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 3</strong>
									: Check the routing table and confirm whether a default route exists.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-3">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-3">ip route</code></pre>
								</div>

								<p>
									The default route is your “how do I reach anything not on my subnet” rule. If it’s missing, you may still reach the gateway (same subnet)
									but you cannot route traffic to external networks.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-3"># Broken state: local subnet only
10.0.2.0/24 dev eth0 proto kernel scope link src 10.0.2.15</code></pre>
								</div>
							</div>

							<!-- Step 4 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 4</strong>
									: Add the missing default route via 10.0.2.2 on eth0.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-4">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-4">sudo ip route add default via 10.0.2.2 dev eth0</code></pre>
								</div>

								<p>
									This installs the missing route immediately. In a production build you would persist routing via NetworkManager or system network config,
									but this lab focuses on restoring connectivity with a targeted runtime fix and then validating end-to-end behavior.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-4"># Healthy state should now include a default route:
default via 10.0.2.2 dev eth0</code></pre>
								</div>
							</div>

							<!-- Step 5 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 5</strong>
									: Verify routing works by pinging an external IP (1.1.1.1).
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-5">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-5">ping -c 2 1.1.1.1</code></pre>
								</div>

								<p>
									Pinging an external IP bypasses DNS entirely. If this works, routing is now functional and any remaining “names fail” issue is likely DNS.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-5">2 packets transmitted, 2 received, 0% packet loss</code></pre>
								</div>
							</div>

							<!-- Step 6 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 6</strong>
									: Check DNS configuration (choose one method).
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-6">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-6">resolvectl status
# OR
cat /etc/resolv.conf</code></pre>
								</div>

								<p>
									This shows what resolver the system is actually using. A common misconfiguration is a loopback resolver (
									<code>127.0.0.1</code>
									) when no local caching DNS service is running.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-6"># Broken state example:
nameserver 127.0.0.1</code></pre>
								</div>
							</div>

							<!-- Step 7 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 7</strong>
									: Fix DNS by setting eth0's IPv4 DNS to 10.0.2.3.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-7">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-7">sudo nmcli con mod eth0 ipv4.dns 10.0.2.3</code></pre>
								</div>

								<p>
									This updates the connection profile so DNS is configured through NetworkManager for that interface. It is the correct approach on RHEL-like
									systems using NetworkManager instead of editing
									<code>/etc/resolv.conf</code>
									by hand.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-7"># After applying, your active resolver should include:
10.0.2.3</code></pre>
								</div>
							</div>

							<!-- Step 8 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 8</strong>
									: Apply the change by bringing the connection up.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-8">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-8">sudo nmcli con up eth0</code></pre>
								</div>

								<p>
									Bringing the connection up re-applies the profile and pushes the new DNS configuration into the resolver stack.
									This is the clean “apply without reboot” workflow.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-8">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/...)</code></pre>
								</div>
							</div>

							<!-- Step 9 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 9</strong>
									: Verify name resolution and HTTP access to example.com.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-9">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-9">getent hosts example.com
# OR
dig +short example.com
# OR
curl -I http://example.com</code></pre>
								</div>

								<p>
									Use a name-based check first to prove DNS is working, then verify HTTP to confirm full internet access. If DNS succeeds but HTTP fails,
									the issue is not name resolution and you should pivot to proxy/firewall/application-layer checks.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-9">93.184.216.34   example.com

# or (HTTP)
HTTP/1.1 200 OK</code></pre>
								</div>
							</div>
						</section>

						<!-- 8) Reference -->
						<!-- 9) Reference -->
						<section class="lab-section" id="reference">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Reference
							</h3>

							<ul class="lab-reference-list">
								<li>
									<code>ip addr show &lt;iface&gt;</code>
									: Displays IP addressing, link state, and interface flags.
								</li>

								<li>
									<code>ip route</code>
									: Shows the kernel routing table, including the default route if configured.
								</li>

								<li>
									<code>ip route add default via &lt;gw&gt; dev &lt;iface&gt;</code>
									: Adds a runtime default route (not persistent across reboot unless managed by the network stack).
								</li>

								<li>
									<code>resolvectl status</code>
									: Displays resolver status and DNS servers in systemd-resolved environments.
								</li>

								<li>
									<code>/etc/resolv.conf</code>
									: Resolver configuration file (often generated or managed by NetworkManager/systemd-resolved).
								</li>

								<li>
									<code>nmcli con mod &lt;name&gt; ipv4.dns &lt;server&gt;</code>
									: Sets DNS for a NetworkManager connection profile.
								</li>

								<li>
									<code>nmcli con up &lt;name&gt;</code>
									: Re-applies a NetworkManager profile without reboot.
								</li>

								<li>
									<code>getent hosts &lt;name&gt;</code>
									: Tests name resolution through the system’s NSS stack.
								</li>

								<li>
									<code>dig +short &lt;name&gt;</code>
									: Direct DNS query and quick output for the resolved record.
								</li>

								<li>
									<code>curl -I &lt;url&gt;</code>
									: Fetches HTTP headers to confirm L7 connectivity to a site.
								</li>
							</ul>
						</section>
					</div>
					<!-- /main -->
				</div>
				<!-- /row -->

				<nav class="lab-pagination">
					<a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">
						&uArr;
					</a>
				</nav>
			</div>
			<!-- /container -->
		</section>

		<!-- FOOTER -->
		<footer class="module bg-light">
			<div class="container">
				<div class="row">
					<div class="col-sm-12">
						<ul class="social-text-links font-alt text-center">
							<li>
								<a href="https://github.com/vonds" target="_blank" rel="noopener">
									Github
								</a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
									Linkedin
								</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="row"></div>
				<div class="row">
					<div class="col-sm-12">
						<p class="copyright text-center m-b-0">
							VONDS &copy;
							<span id="year"></span>
						</p>

						<div class="scroll-up">
							<a href="#totop"><i class="fa fa-angle-double-up"></i></a>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<!-- Javascript files (your existing) -->
	<script src="../assets/js/jquery-2.2.4.min.js"></script>
	<script src="../assets/bootstrap/js/bootstrap.min.js"></script>
	<script src="../assets/js/jquery.superslides.min.js"></script>
	<script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
	<script src="../assets/js/jquery.magnific-popup.min.js"></script>
	<script src="../assets/js/owl.carousel.min.js"></script>
	<script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
	<script src="../assets/js/imagesloaded.pkgd.js"></script>
	<script src="../assets/js/isotope.pkgd.min.js"></script>
	<script src="../assets/js/packery-mode.pkgd.min.js"></script>
	<script src="../assets/js/appear.js"></script>
	<script src="../assets/js/jquery.easing.1.3.js"></script>
	<script src="../assets/js/wow.min.js"></script>
	<script src="../assets/js/jqBootstrapValidation.js"></script>
	<script src="../assets/js/jquery.fitvids.js"></script>
	<script src="../assets/js/jquery.parallax-1.1.3.js"></script>
	<script src="../assets/js/smoothscroll.js"></script>
	<script src="../assets/js/custom.js"></script>

	<!-- Lab page JS (new) -->
	<script src="../assets/js/lab.js"></script>
</body>

</html>
