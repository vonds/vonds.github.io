<!-- lab129.html -->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="exit_0 Documentation" />
	<meta name="name" content="Vonds" />

	<title>Vonds | Lab 129</title>

	<!-- Favicons -->
	<link rel="shortcut icon" href="../assets/images/favicon.png" />
	<link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/images/apple-touch-icon-114x114.png" />

	<!-- Site styles (your existing) -->
	<link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
	<link href="../assets/css/linea-icons.css" rel="stylesheet" />
	<link href="../assets/css/ionicons.min.css" rel="stylesheet" />
	<link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
	<link href="../assets/css/magnific-popup.css" rel="stylesheet" />
	<link href="../assets/css/owl.carousel.css" rel="stylesheet" />
	<link href="../assets/css/superslides.css" rel="stylesheet" />
	<link href="../assets/css/vertical.css" rel="stylesheet" />
	<link href="../assets/css/animate.css" rel="stylesheet" />
	<link href="../assets/css/style.css" rel="stylesheet" />
	<link href="../assets/css/docs.css" rel="stylesheet" />

	<!-- Lab page styles (new) -->
	<link href="../assets/css/lab.css" rel="stylesheet" />

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet" />
</head>

<body>
	<!-- PRELOADER -->
	<div class="page-loader">
		<div class="loader">Loading...</div>
	</div>

	<!-- OVERLAY MENU -->
	<div id="overlay-menu" class="overlay-menu">
		<a href="#" id="overlay-menu-hide" class="navigation-hide">
			<i class="ion-close-round"></i>
		</a>

		<div class="overlay-menu-inner">
			<nav class="overlay-menu-nav">
				<ul id="nav">
					<li><a href="../index.html">Home</a></li>

					<li class="slidedown">
						<a href="#">Portfolio</a>
						<ul>
							<li>
								<a href="https://github.com/vonds/exit_0" target="_blank" rel="noopener">
									exit_0
								</a>
							</li>
							<li>
								<a href="docs.html" target="_blank" rel="noopener">
									exit_0 Documentation
								</a>
							</li>
							<li><a href="https://github.com/vonds/sentinel" target="_blank" rel="noopener">Sentinel</a></li>
						</ul>
					</li>

					<li>
						<a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
							LinkedIn
						</a>
					</li>
					<li>
						<a href="https://github.com/vonds" target="_blank" rel="noopener">
							Github
						</a>
					</li>
					<li>
						<a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
					</li>
				</ul>
			</nav>
		</div>

		<div class="overlay-navigation-footer">
			<div class="container">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p class="copyright font-alt m-b-0">
							VONDS &copy;
							<script>
								document.write(new Date().getFullYear())
							</script>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- WRAPPER -->
	<div class="wrapper">
		<!-- NAVIGATION -->
		<nav class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="../index.html">
						<img src="../assets/images/logo-dark.png" width="95" alt="" />
					</a>
				</div>

				<ul id="icons-navbar" class="nav navbar-nav navbar-right">
					<li>
						<a href="#" id="toggle-menu" class="show-overlay" title="Menu">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- DOCS PAGE -->
		<section class="module">
			<div class="container">
				<h2 class="font-alt module-title m-t-60">
					Lab 129: Fix Intermittent Connectivity (MTU)
				</h2>
				<nav class="lab-pagination">
					<a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">
						&laquo;
					</a>
					<a id="next-lab" class="lab-nav-link" href="#" aria-label="Next lab">
						&raquo;
					</a>
				</nav>
				<div class="row">
					<!-- LEFT SIDEBAR -->
					<div class="col-sm-4 col-md-3 lab-sidebar">
						<div class="docs-sidebar">
							<div class="docs-widget">
								<h5 class="widget-title">
									<a href="./docs.html">Back to Lab Index</a>
								</h5>
								<ul class="docs-nav">
									<li><a href="#scenario">Scenario</a></li>

									<li><a href="#walkthrough">Walkthrough</a></li>
									<li><a href="#reference">Reference</a></li>
								</ul>
							</div>
						</div>
					</div>

					<!-- MAIN CONTENT -->
					<div class="col-sm-8 col-md-9 lab-doc">
						<!-- 1) Title + Summary (2 sentences max) -->
						<p class="m-b-20 lab-summary">
							Diagnose intermittent connectivity where small traffic succeeds but larger transfers fail due to a mismatched MTU.
							Prove the failure with a DF “large ping”, correct the MTU on eth0, then re-test to confirm stability.
						</p>

						<section class="lab-section" id="video" aria-label="Lab video">
							<div class="lab-video">
								<div class="lab-video-embed text-center">
									<iframe src="https://www.youtube.com/embed/uJk54bhaadA?si=seGSukCoMFN7ohRo"
										title="YouTube video player" frameborder="0"
										allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
										referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
								</div>
							</div>
						</section>

						<!-- 2) Scenario -->
						<section class="lab-section" id="scenario">
							<div class="lab-chips" aria-label="Tags">
								<span class="lab-chip">
									<span class="lab-chip-key">networking</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">troubleshooting</span>
								</span>
								<span class="lab-chip">
									<span class="lab-chip-key">core</span>
								</span>
							</div>

							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Scenario
							</h3>
							<p>
								Users report that connections work sometimes but fail on larger transfers. Small pings succeed, but some traffic hangs or drops,
								and you suspect a misconfigured MTU on
								<code>eth0</code>
								.
							</p>
							<div class="lab-callout">
								<div class="lab-callout-label">Operator context</div>
								<p class="m-b-0">
									MTU problems often look like “random network issues” because small packets pass while larger ones fragment or blackhole.
									Your job is to reproduce the failure, make a safe targeted change, then prove the fix with the same test.
								</p>
							</div>
						</section>

						<!-- 3) Objective -->
						<section class="lab-section alt-background" id="objective">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Objective
							</h3>
							<ul>
								<li>
									Inspect the current MTU on
									<code>eth0</code>
									.
								</li>
								<li>
									Reproduce the failure using a “do not fragment” ping test.
								</li>
								<li>
									Correct the MTU to
									<code>1500</code>
									.
								</li>
								<li>
									Re-test using the same method and confirm stability.
								</li>
							</ul>
						</section>

						<!-- 4) What You'll Practice -->
						<section class="lab-section" id="practice">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								What You’ll Practice
							</h3>

							<ul class="m-t-10">
								<li>
									Interface inspection using
									<code>ip link</code>
									.
								</li>
								<li>
									MTU blackhole diagnosis using
									<code>ping</code>
									with DF behavior (
									<code>-M do</code>
									) and payload sizing (
									<code>-s</code>
									).
								</li>
								<li>
									Applying a targeted runtime MTU fix with
									<code>ip link set</code>
									.
								</li>
								<li>
									Verification discipline: re-run the same test that failed before declaring recovery.
								</li>
							</ul>
						</section>

						<!-- 5) Commands Walkthrough -->
						<section class="lab-section alt-background" id="walkthrough">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Walkthrough
							</h3>

							<!-- Step 1 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 1</strong>
									: Check the current MTU on eth0.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-1">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-1">ip link show eth0</code></pre>
								</div>

								<p>
									This confirms the interface is up and shows the current MTU value. If the MTU is set too low or does not match the network path,
									you can see “works sometimes” behavior depending on packet size and how fragmentation is handled.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-1"># Example failure state:
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1200 qdisc fq_codel state UP mode DEFAULT group default qlen 1000</code></pre>
								</div>
							</div>

							<!-- Step 2 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 2</strong>
									: Test a large ping with DF set (should fail).
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-2">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-2">ping -c 1 -M do -s 1400 1.1.1.1</code></pre>
								</div>

								<p>
									<code>-M do</code>
									sets “do not fragment.” If your packet exceeds the path MTU, the kernel will refuse to send it and report an MTU problem.
									This is a clean way to prove “large packets fail” without guessing at application behavior.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-2">ping: local error: message too long, mtu=1200</code></pre>
								</div>
							</div>

							<!-- Step 3 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 3</strong>
									: Fix the MTU on eth0.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-3">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-3">sudo ip link set dev eth0 mtu 1500</code></pre>
								</div>

								<p>
									This applies the corrected MTU immediately. In production you would also persist the change in your network configuration
									so it survives reboot, but the focus here is restoring stable connectivity safely and quickly.
								</p>
							</div>

							<!-- Step 4 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 4</strong>
									: Confirm the MTU is now correct.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-4">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-4">ip link show eth0</code></pre>
								</div>

								<p>
									Always re-check the live interface state after making a change. This prevents you from “testing the old configuration” by mistake.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-4">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000</code></pre>
								</div>
							</div>

							<!-- Step 5 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 5</strong>
									: Re-test the large ping.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-5">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-5">ping -c 1 -M do -s 1400 1.1.1.1</code></pre>
								</div>

								<p>
									This is the same test that failed earlier. If it succeeds now, you have strong evidence the MTU mismatch was the root cause.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-5">64 bytes from 1.1.1.1: icmp_seq=1 ttl=57 time=13.1 ms</code></pre>
								</div>
							</div>

							<!-- Step 6 -->
							<div class="lab-step">
								<div class="lab-step-title">
									<strong class="font-alt">Step 6</strong>
									: Final sanity check with a normal ping.
								</div>

								<div class="lab-codeblock m-b-40 m-t-40">
									<div class="lab-codeblock-header">
										<span>Command</span>
										<button class="lab-copy-btn" type="button" data-copy="#cmd-step-6">
											Copy
										</button>
									</div>
									<pre><code id="cmd-step-6">ping -c 1 1.1.1.1</code></pre>
								</div>

								<p>
									A normal ping confirms baseline reachability. Combined with the DF test above, you’ve validated both “small” and “large” packet behavior.
								</p>

								<div class="lab-codeblock m-b-40 m-t-40">
									<pre><code id="verify-step-6">64 bytes from 1.1.1.1: icmp_seq=1 ttl=57 time=12.6 ms</code></pre>
								</div>
							</div>
						</section>

						<!-- 8) Reference -->
						<!-- 9) Reference -->
						<section class="lab-section" id="reference">
							<h3 class="font-alt lab-section-title m-b-40 m-t-40">
								Reference
							</h3>

							<ul class="lab-reference-list">
								<li>
									<code>ip link show &lt;iface&gt;</code>
									: Displays link state, MTU, and interface flags for a network device.
								</li>

								<li>
									<code>ip link set dev &lt;iface&gt; mtu &lt;value&gt;</code>
									: Changes the MTU for an interface at runtime.
								</li>

								<li>
									<code>ping -M do -s &lt;bytes&gt; &lt;host&gt;</code>
									: Sends an ICMP echo request with DF behavior and a specific payload size.
									<ul>
										<li>
											<code>-M do</code>
											: “Do not fragment.” Fails fast if the packet exceeds the path MTU.
										</li>
										<li>
											<code>-s &lt;bytes&gt;</code>
											: Sets the ICMP payload size (header overhead is added on top).
										</li>
										<li>
											<code>-c 1</code>
											: Sends a single packet for quick verification.
										</li>
									</ul>
								</li>

								<li>
									MTU
									: Maximum Transmission Unit. If mismatched, you may see partial connectivity where small packets succeed and larger packets fail.
								</li>
							</ul>
						</section>
					</div>
					<!-- /main -->
				</div>
				<!-- /row -->

				<nav class="lab-pagination">
					<a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">
						&uArr;
					</a>
				</nav>
			</div>
			<!-- /container -->
		</section>

		<!-- FOOTER -->
		<footer class="module bg-light">
			<div class="container">
				<div class="row">
					<div class="col-sm-12">
						<ul class="social-text-links font-alt text-center">
							<li>
								<a href="https://github.com/vonds" target="_blank" rel="noopener">
									Github
								</a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
									Linkedin
								</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="row"></div>
				<div class="row">
					<div class="col-sm-12">
						<p class="copyright text-center m-b-0">
							VONDS &copy;
							<span id="year"></span>
						</p>

						<div class="scroll-up">
							<a href="#totop"><i class="fa fa-angle-double-up"></i></a>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<!-- Javascript files (your existing) -->
	<script src="../assets/js/jquery-2.2.4.min.js"></script>
	<script src="../assets/bootstrap/js/bootstrap.min.js"></script>
	<script src="../assets/js/jquery.superslides.min.js"></script>
	<script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
	<script src="../assets/js/jquery.magnific-popup.min.js"></script>
	<script src="../assets/js/owl.carousel.min.js"></script>
	<script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
	<script src="../assets/js/imagesloaded.pkgd.js"></script>
	<script src="../assets/js/isotope.pkgd.min.js"></script>
	<script src="../assets/js/packery-mode.pkgd.min.js"></script>
	<script src="../assets/js/appear.js"></script>
	<script src="../assets/js/jquery.easing.1.3.js"></script>
	<script src="../assets/js/wow.min.js"></script>
	<script src="../assets/js/jqBootstrapValidation.js"></script>
	<script src="../assets/js/jquery.fitvids.js"></script>
	<script src="../assets/js/jquery.parallax-1.1.3.js"></script>
	<script src="../assets/js/smoothscroll.js"></script>
	<script src="../assets/js/custom.js"></script>

	<!-- Lab page JS (new) -->
	<script src="../assets/js/lab.js"></script>
</body>

</html>
