 <!-- lab114.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 114</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dosis"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a
                    href="https://github.com/vonds/exit_0"
                    target="_blank"
                    rel="noopener"
                  >
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 114: RHEL Bootloader Basics
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Inspect GRUB defaults and menu entries to confirm what the
                system is configured to boot, then regenerate
                <code>grub.cfg</code> safely using supported tooling. Validate
                installed kernels, verify the updated configuration timestamp,
                and confirm the system’s default boot target.
              </p>

              <!-- Video (kept on page; removed from left panel) -->
              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/xhRocDAUm30?si=dkbbxQ6gMto7Lkin"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">troubleshooting</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">boot</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">core</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>

                <p>
                  A RHEL host is not booting as expected. Before changing
                  anything, you need to inspect the current GRUB defaults,
                  review available boot menu entries, confirm which kernels are
                  installed, and safely regenerate
                  <code>/boot/grub2/grub.cfg</code> so the configuration matches
                  what is on disk.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    The goal is evidence-first troubleshooting. You will verify
                    what GRUB is configured to do, regenerate configuration
                    using supported tooling, and confirm the change by checking
                    file timestamps and boot-related state.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>Inspect GRUB defaults in <code>/etc/default/grub</code>.</li>
                  <li>Review GRUB menu entries from <code>/boot/grub2/grub.cfg</code>.</li>
                  <li>Identify installed kernel and initramfs artifacts in <code>/boot</code>.</li>
                  <li>
                    Regenerate <code>grub.cfg</code> safely using
                    <code>grub2-mkconfig</code>.
                  </li>
                  <li>Verify the updated configuration via file metadata.</li>
                  <li>Confirm the systemd default target to understand expected boot mode.</li>
                  <li>Check GRUB installer version without performing writes.</li>
                </ul>
              </section>

              <!-- Concepts (no alt-background moving forward) -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    <code>/etc/default/grub</code> holds GRUB defaults that feed into the
                    generated <code>grub.cfg</code>.
                  </li>
                  <li>
                    <code>/boot/grub2/grub.cfg</code> is generated output. Treat it as
                    “product,” not a hand-edited source of truth.
                  </li>
                  <li>
                    When boot issues are reported, confirm what is on disk first:
                    kernels (<code>vmlinuz</code>) and initramfs images must exist in
                    <code>/boot</code>.
                  </li>
                  <li>
                    Regenerating configuration is safer than manual edits because it uses
                    supported scripts and kernel discovery.
                  </li>
                  <li>
                    Boot outcome is not only GRUB. The systemd default target influences
                    whether the system boots to multi-user or graphical mode.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Inspect GRUB default settings.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">grep '^GRUB_' /etc/default/grub</code></pre>
                  </div>

                  <p>
                    This file is the primary source for GRUB defaults used when
                    generating <code>grub.cfg</code>. You are confirming timeout
                    behavior, default boot selection logic, and the kernel command
                    line appended at boot.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>GRUB_TIMEOUT=5
GRUB_DEFAULT=saved
GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/rhel-swap"</code></pre>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : List available GRUB menu entries.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">grep '^menuentry' /boot/grub2/grub.cfg | head</code></pre>
                  </div>

                  <p>
                    Listing <code>menuentry</code> lines provides a fast view of
                    what GRUB can boot. This is a practical starting point when
                    “it boots the wrong kernel” or “rescue entry is missing” is
                    part of the incident report.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>menuentry 'Red Hat Enterprise Linux (5.14.0-427.el9.x86_64)' {
menuentry 'Red Hat Enterprise Linux (rescue)' {</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Identify installed kernel and initramfs images.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">ls -1 /boot | grep -E 'vmlinuz|initramfs'</code></pre>
                  </div>

                  <p>
                    This confirms what is actually present on disk. If GRUB
                    entries reference artifacts that do not exist, the system can
                    fail to boot or fall back unexpectedly.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>vmlinuz-5.14.0-427.el9.x86_64
initramfs-5.14.0-427.el9.x86_64.img</code></pre>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Safely regenerate GRUB configuration.
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Safety note</div>
                    <p class="m-b-0">
                      Regenerating <code>grub.cfg</code> should be done with the
                      supported command for the platform. Avoid manual edits.
                      Write the output to the correct path for BIOS-based systems
                      (as shown here).
                    </p>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code></pre>
                  </div>

                  <p>
                    This rebuilds GRUB’s configuration based on defaults,
                    discovered kernels, and scripts under <code>/etc/grub.d</code>.
                    You are looking for “Found linux image” lines as proof the
                    expected kernel and initramfs were detected.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>Generating grub configuration file ...
Found linux image: /boot/vmlinuz-5.14.0-427.el9.x86_64
Found initrd image: /boot/initramfs-5.14.0-427.el9.x86_64.img
done</code></pre>
                  </div>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>
                    : Verify the <code>grub.cfg</code> timestamp.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">ls -l /boot/grub2/grub.cfg</code></pre>
                  </div>

                  <p>
                    This is your quick verification that the file was regenerated
                    and updated when you ran <code>grub2-mkconfig</code>. In
                    change-controlled environments, you would also retain a copy
                    or checksum.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>-rw-------. 1 root root 41287 Aug 20 14:32 /boot/grub2/grub.cfg</code></pre>
                  </div>
                </div>

                <!-- Step 6 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 6</strong>
                    : Confirm systemd default target.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-6"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-6">systemctl get-default</code></pre>
                  </div>

                  <p>
                    If the symptom is “boots to the wrong mode,” confirm whether
                    the system is expected to boot into a graphical or multi-user
                    environment. This is not GRUB configuration, but it is part
                    of the boot outcome you must validate.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>graphical.target</code></pre>
                  </div>
                </div>

                <!-- Step 7 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 7</strong>
                    : Check GRUB installer version (no writes performed).
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-7"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-7">grub2-install --version</code></pre>
                  </div>

                  <p>
                    This confirms which GRUB release is installed. Version
                    awareness matters when debugging behavior across updates or
                    validating parity across a fleet.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>grub-install (GRUB) 2.06</code></pre>
                  </div>
                </div>
              </section>

              <!-- Common breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    /boot/grub2/grub.cfg does not exist
                  </div>
                  <p class="m-b-0">
                    The GRUB output path differs on UEFI systems. If
                    <code>/boot/grub2/grub.cfg</code> is missing, confirm the
                    platform firmware mode and use the correct GRUB config
                    location for that system.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    grub2-mkconfig output does not show “Found linux image”
                  </div>
                  <p class="m-b-0">
                    Confirm kernel and initramfs artifacts exist in
                    <code>/boot</code>. If they do, verify that the GRUB scripts
                    and defaults are present and not corrupted, then re-run the
                    command.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    The host still boots “wrong” after regenerating grub.cfg
                  </div>
                  <p class="m-b-0">
                    Confirm whether “wrong” refers to kernel selection or boot
                    mode. For boot mode, check
                    <code>systemctl get-default</code>. For kernel selection,
                    review GRUB defaults (for example, saved entry behavior) and
                    re-check menu entries.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  This lab makes one change: regenerating <code>grub.cfg</code>.
                  Your cleanup is confirming the file updated and that kernel
                  discovery matched what is installed.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button
                      class="lab-copy-btn"
                      type="button"
                      data-copy="#cmd-cleanup"
                    >
                      Copy
                    </button>
                  </div>
                  <pre><code id="cmd-cleanup">grep '^GRUB_' /etc/default/grub
grep '^menuentry' /boot/grub2/grub.cfg | head
ls -1 /boot | grep -E 'vmlinuz|initramfs'
ls -l /boot/grub2/grub.cfg
systemctl get-default
grub2-install --version</code></pre>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Success signal</div>
                  <p class="m-b-0">
                    You can show GRUB defaults, list menu entries, prove the
                    kernel artifacts exist on disk, and demonstrate that
                    <code>grub.cfg</code> was regenerated successfully by both
                    tool output and file timestamp.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>/etc/default/grub</code>
                    : GRUB defaults used when generating <code>grub.cfg</code>.
                  </li>

                  <li>
                    <code>/boot/grub2/grub.cfg</code>
                    : Generated GRUB configuration (BIOS systems) containing menu
                    entries and boot logic.
                  </li>

                  <li>
                    <code>grep '^GRUB_' /etc/default/grub</code>
                    : Displays GRUB defaults such as timeout, default entry, and
                    kernel command line.
                  </li>

                  <li>
                    <code>grep '^menuentry' /boot/grub2/grub.cfg | head</code>
                    : Quick view of available boot menu entries.
                  </li>

                  <li>
                    <code>ls -1 /boot | grep -E 'vmlinuz|initramfs'</code>
                    : Confirms installed kernel and initramfs artifacts present
                    on disk.
                  </li>

                  <li>
                    <code>grub2-mkconfig -o /boot/grub2/grub.cfg</code>
                    : Regenerates GRUB configuration using supported tooling.
                    <ul>
                      <li>
                        <code>-o</code>
                        : Writes output to the specified file path.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>ls -l /boot/grub2/grub.cfg</code>
                    : Verifies configuration file timestamp and permissions.
                  </li>

                  <li>
                    <code>systemctl get-default</code>
                    : Shows the default systemd target (expected boot mode).
                  </li>

                  <li>
                    <code>grub2-install --version</code>
                    : Displays installed GRUB version without modifying system
                    state.
                  </li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy; <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear()
    </script>
  </body>
</html>
