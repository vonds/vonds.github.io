<!-- lab110.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 110</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dosis"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a
                    href="https://github.com/vonds/exit_0"
                    target="_blank"
                    rel="noopener"
                  >
                    exit_0
                  </a>
                </li>
                <li>
                  <a
                    href="https://github.com/vonds/sentinel"
                    target="_blank"
                    rel="noopener"
                  >
                    Sentinel
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0 Documentation
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 110: Monitor Hardware Events
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="./lab109.html"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="./lab111.html"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Monitor real hardware changes by combining kernel log inspection
                with live udev event tracking. Use readable timestamps, targeted
                filtering, udev property queries, and controlled udev triggers to
                validate device identity and rule execution.
              </p>

              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/uJk54bhaadA?si=seGSukCoMFN7ohRo"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">troubleshooting</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">hardware</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">udev</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>
                <p>
                  A user reports intermittent issues with a USB device and
                  occasional storage detection delays at boot. You need to gather
                  evidence of device connect events, confirm how the kernel and
                  udev classify the device, and validate that udev rules can be
                  triggered and settled predictably.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    For hardware issues, timestamps and device identity matter.
                    Capture reliable evidence, reduce noise through filtering, and
                    confirm device attributes directly from udev and sysfs before
                    changing system state.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>Inspect recent kernel messages and isolate relevant events.</li>
                  <li>Use human-readable timestamps for incident-quality log review.</li>
                  <li>Filter kernel logs for USB-related activity.</li>
                  <li>
                    Monitor live kernel and udev events with
                    <code>udevadm monitor</code>
                    .
                  </li>
                  <li>
                    Query udev properties for a device node with
                    <code>udevadm info</code>
                    .
                  </li>
                  <li>
                    Trigger udev processing for the block subsystem and wait for
                    completion.
                  </li>
                  <li>
                    Confirm device identity by reading vendor and product IDs from
                    sysfs.
                  </li>
                </ul>
              </section>

              <!-- Concepts -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    Kernel ring buffer vs udev processing: what each stream proves.
                  </li>
                  <li>
                    Why readable timestamps matter for tickets and incident notes.
                  </li>
                  <li>
                    How udev properties map a device node to a sysfs path used by
                    rules.
                  </li>
                  <li>
                    Why <code>udevadm settle</code> makes trigger workflows repeatable.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Show the last 20 kernel messages.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">dmesg | tail -n 20</code></pre>
                  </div>

                  <p>
                    This is the quickest way to see what the kernel has logged most
                    recently. It can confirm whether a device was detected, whether
                    a driver bound successfully, and whether errors are present.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Expected patterns:
# usb ... new ... device
# ata... link up
# driver init lines</code></pre>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : Use human-readable timestamps and scope output.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">dmesg -T | tail -n 5</code></pre>
                  </div>

                  <p>
                    Human-readable timestamps help with incident notes and correlate
                    events across logs. Use this format when you plan to paste
                    evidence into a ticket or write-up.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example:
# [Tue Aug 19 12:08:03 2025] ...</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Filter for USB-related messages.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">dmesg -T | grep -i usb | tail -n 10</code></pre>
                  </div>

                  <p>
                    Filtering reduces noise so you can focus on device detection and
                    enumeration events. This is often where you find vendor and
                    product IDs, device speed, and interface initialization.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Expected patterns:
# usb ... new ... device
# idVendor=.... idProduct=....</code></pre>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Monitor live kernel and udev events.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4">udevadm monitor --kernel --udev</code></pre>
                  </div>

                  <p>
                    This is your live event stream. Kernel uevents show what the
                    kernel emits, and udev events show what user space receives and
                    processes. On device connect, you should see matching
                    <code>add</code>
                    events in both streams.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Expected patterns:
# KERNEL[...] add ... (usb)
# UDEV  [...] add ... (usb)</code></pre>
                  </div>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>
                    : Query udev properties for a device node.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">udevadm info --query=all --name=/dev/sda</code></pre>
                  </div>

                  <p>
                    <code>udevadm info</code>
                    prints resolved udev properties for a device node. This is where
                    you confirm bus type, model, serial, and the canonical sysfs
                    path used by rules.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Key fields to look for:
# E: DEVNAME=/dev/sda
# E: ID_BUS=...
# E: ID_MODEL=...
# E: ID_SERIAL=...
# E: DEVPATH=/devices/...</code></pre>
                  </div>
                </div>

                <!-- Step 6 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 6</strong>
                    : Trigger udev for block devices and wait for completion.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-6"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-6">udevadm trigger --subsystem-match=block; udevadm settle</code></pre>
                  </div>

                  <p>
                    <code>udevadm trigger</code>
                    replays events so rules can re-evaluate existing devices.
                    <code>udevadm settle</code>
                    waits until udev finishes processing, which makes scripted
                    verification steps repeatable.
                  </p>
                </div>

                <!-- Step 7 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 7</strong>
                    : Confirm USB vendor and product IDs from sysfs.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-7a"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-7a">cat /sys/bus/usb/devices/1-1/idVendor</code></pre>
                  </div>

                  <p>
                    sysfs is the kernelâ€™s live device tree. Vendor and product IDs
                    from sysfs are strong evidence of device identity without
                    relying on log parsing.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-7b"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-7b">cat /sys/bus/usb/devices/1-1/idProduct</code></pre>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example:
046d
c534</code></pre>
                  </div>
                </div>
              </section>

              <!-- Breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    dmesg output looks empty or truncated
                  </div>
                  <p class="m-b-0">
                    The ring buffer may have rotated. Capture evidence sooner, or
                    use your system log pipeline for longer retention.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    udevadm monitor shows kernel events but not udev events
                  </div>
                  <p class="m-b-0">
                    udev may not be running or events may be filtered by your
                    environment. Confirm your init system and udev status.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    /sys/bus/usb/devices/1-1 does not exist
                  </div>
                  <p class="m-b-0">
                    USB device paths vary by host. Identify the correct sysfs path
                    from
                    <code>udevadm info</code>
                    using
                    <code>E: DEVPATH=...</code>
                    and read IDs from that device directory.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  This lab is read-only unless you choose to run triggers. If you
                  started a monitor session, stop it with
                  <code>Ctrl+C</code>
                  .
                </p>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>dmesg</code>
                    : Reads the kernel ring buffer (recent kernel messages).
                    <ul>
                      <li>
                        <code>-T</code>
                        or
                        <code>--ctime</code>
                        : Human-readable timestamps.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>udevadm monitor</code>
                    : Watches live device events.
                    <ul>
                      <li><code>--kernel</code>: Show kernel uevents.</li>
                      <li><code>--udev</code>: Show udev-processed events.</li>
                    </ul>
                  </li>

                  <li>
                    <code>udevadm info --query=all --name=/dev/&lt;node&gt;</code>
                    : Displays resolved udev properties and sysfs path for a device
                    node.
                  </li>

                  <li>
                    <code>udevadm trigger</code>
                    : Retriggers events so udev rules can re-run against existing
                    devices.
                    <ul>
                      <li>
                        <code>--subsystem-match=&lt;name&gt;</code>
                        : Restrict triggers to a subsystem (example:
                        <code>block</code>
                        ).
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>udevadm settle</code>
                    : Waits until udev has finished processing queued events.
                  </li>

                  <li>
                    <code>/sys</code>
                    : sysfs virtual filesystem exposing live kernel object state
                    (device IDs, attributes, drivers).
                  </li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy;
                <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear()
    </script>
  </body>
</html>
