<!-- lab015.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 015</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-touch-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet" />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a href="https://github.com/vonds/exit_0" target="_blank" rel="noopener">
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">Lab 15: Manage User Accounts and Password Policies</h2>

          <nav class="lab-pagination">
            <a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">&laquo;</a>
            <a id="next-lab" class="lab-nav-link" href="#" aria-label="Next lab">&raquo;</a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Provision a new local user and apply password aging controls using shadow-utils tooling.
                Verify effective policy with <code>id</code> and <code>chage</code>, then confirm where system-wide defaults are defined.
              </p>

              <!-- Video (kept on page; removed from left panel) -->
              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/Wso7op4D0eM?si=axFvYdTxYvBO1JK1"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip"><span class="lab-chip-key">users</span></span>
                  <span class="lab-chip"><span class="lab-chip-key">security</span></span>
                  <span class="lab-chip"><span class="lab-chip-key">core</span></span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Scenario</h3>

                <p>
                  A new intern has joined your company. You need to create a local account, set an initial password,
                  force a password change on first login, and confirm the effective password aging policy.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    User provisioning is not just “create an account.” You need predictable defaults, controlled onboarding,
                    and proof that policy is actually enforced.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Objective</h3>
                <ul>
                  <li>Create a new user account named <code>intern</code>.</li>
                  <li>Set an initial password for the account.</li>
                  <li>Force a password change on first login.</li>
                  <li>Inspect password aging policy applied to the user.</li>
                  <li>Identify where system defaults for password aging are defined.</li>
                </ul>
              </section>

              <!-- Concepts -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Concepts</h3>
                <ul>
                  <li>
                    <code>useradd</code> creates the account record; defaults depend on local configuration and policy.
                  </li>
                  <li>
                    <code>passwd</code> updates authentication state in the shadow database, not just a “password prompt.”
                  </li>
                  <li>
                    <code>chage</code> is the authoritative interface for password aging controls (expire, warn, min/max days).
                  </li>
                  <li>
                    Forcing first-login rotation is typically done by expiring the current password state.
                  </li>
                  <li>
                    System-wide defaults live in <code>/etc/login.defs</code>, but per-user state still must be verified.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Walkthrough</h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>: Create the user account.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-1">Copy</button>
                    </div>
                    <pre><code id="cmd-step-1">sudo useradd intern</code></pre>
                  </div>

                  <p>
                    This creates the account entry so the system can manage the user. If home directories or default groups
                    are not created automatically on your system, that behavior is driven by local defaults.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Verification</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-1b">Copy</button>
                    </div>
                    <pre><code id="cmd-step-1b">id intern</code></pre>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example output:
uid=1002(intern) gid=1002(intern) groups=1002(intern)</code></pre>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>: Set the user’s initial password.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-2">Copy</button>
                    </div>
                    <pre><code id="cmd-step-2">sudo passwd intern</code></pre>
                  </div>

                  <p>
                    This sets the account’s password and updates the relevant authentication state in the shadow database.
                    Use this as part of onboarding before you enforce first-login rotation.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example interaction:
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>: Force a password change on first login.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-3">Copy</button>
                    </div>
                    <pre><code id="cmd-step-3">sudo chage -d 0 intern</code></pre>
                  </div>

                  <p>
                    Setting the “last password change” date to <code>0</code> expires the current password state,
                    forcing the user to choose a new password at next login.
                  </p>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Expected behavior</div>
                    <p class="m-b-0">
                      On next login, the user is prompted to change the password before continuing the session.
                    </p>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>: Inspect password aging and expiration policy for the user.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-4">Copy</button>
                    </div>
                    <pre><code id="cmd-step-4">chage -l intern</code></pre>
                  </div>

                  <p>
                    This is your audit view. It confirms whether the password is expired, when it will expire,
                    and which warning window and min/max values are active for this account.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example output:
Last password change                                    : password must be changed
Password expires                                        : password must be changed
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 0
Maximum number of days between password change          : 30
Number of days of warning before password expires       : 7</code></pre>
                  </div>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>: Confirm where system defaults for password aging come from.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-5">Copy</button>
                    </div>
                    <pre><code id="cmd-step-5">grep -E '^(PASS_MAX_DAYS|PASS_MIN_DAYS|PASS_WARN_AGE)' /etc/login.defs</code></pre>
                  </div>

                  <p>
                    <code>/etc/login.defs</code> is a primary reference for default password aging values used by shadow-utils tooling.
                    This is where you validate the baseline policy you expect new accounts to inherit.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example output:
PASS_MAX_DAYS   30
PASS_MIN_DAYS   0
PASS_WARN_AGE   7</code></pre>
                  </div>
                </div>
              </section>

              <!-- Breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Common breakpoints</h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">User exists but home directory is missing</div>
                  <p class="m-b-0">
                    Home directory creation may be disabled by default. Confirm local policy and whether <code>useradd</code>
                    is configured to create home directories automatically.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Password change is not forced on next login</div>
                  <p class="m-b-0">
                    Re-check the user’s aging state using <code>chage -l intern</code>. If the last password change is not
                    expired, re-run <code>chage -d 0 intern</code>.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Defaults in login.defs do not match the user’s effective policy</div>
                  <p class="m-b-0">
                    Defaults do not retroactively rewrite existing accounts. Use <code>chage</code> to enforce policy per user,
                    then verify with <code>chage -l</code>.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Account cannot authenticate after password set</div>
                  <p class="m-b-0">
                    Confirm the account is not locked and that authentication is permitted by local access policy.
                    Check for lock indicators in account state and validate PAM policy separately if needed.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Cleanup checklist</h3>

                <p>
                  This lab creates a local account. If you are running this on a shared or long-lived system,
                  remove the test user when you are done.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button class="lab-copy-btn" type="button" data-copy="#cmd-cleanup">Copy</button>
                  </div>
                  <pre><code id="cmd-cleanup">id intern
chage -l intern
sudo userdel -r intern</code></pre>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Success signal</div>
                  <p class="m-b-0">
                    The user is removed cleanly, and the home directory is deleted if it existed.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Reference</h3>

                <ul class="lab-reference-list">

                  <li>
                    <code>useradd &lt;user&gt;</code>: Creates a new local user account entry.
                  </li>

                  <li>
                    <code>passwd &lt;user&gt;</code>: Sets or updates the user’s password.
                  </li>

                  <li>
                    <code>chage -d 0 &lt;user&gt;</code>: Expires the password immediately so the user must change it at next login.
                    <ul>
                      <li><code>-d 0</code>: Set “last password change” date to day 0 (forces immediate expiration).</li>
                    </ul>
                  </li>

                  <li>
                    <code>chage -l &lt;user&gt;</code>: Displays password aging and expiration details for a user.
                    <ul>
                      <li><code>-l</code>: List the current aging settings.</li>
                    </ul>
                  </li>

                  <li>
                    <code>id &lt;user&gt;</code>: Confirms the account exists and shows UID/GID and group memberships.
                  </li>

                  <li>
                    <code>grep -E '^(PASS_MAX_DAYS|PASS_MIN_DAYS|PASS_WARN_AGE)' /etc/login.defs</code>: Shows default password aging settings.
                    <ul>
                      <li><code>PASS_MAX_DAYS</code>: Default maximum days a password is valid.</li>
                      <li><code>PASS_MIN_DAYS</code>: Default minimum days before a password can be changed again.</li>
                      <li><code>PASS_WARN_AGE</code>: Default warning days before expiration.</li>
                    </ul>
                  </li>

                  <li>
                    <code>userdel -r &lt;user&gt;</code>: Removes a local user account and optionally deletes the home directory.
                    <ul>
                      <li><code>-r</code>: Remove the user’s home directory and mail spool if present.</li>
                    </ul>
                  </li>

                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a href="https://github.com/vonds" target="_blank" rel="noopener">Github</a>
                </li>
                <li>
                  <a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">Linkedin</a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy; <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.css"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear()
    </script>
  </body>
</html>
