<!-- lab108.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 108</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dosis"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a
                    href="https://github.com/vonds/exit_0"
                    target="_blank"
                    rel="noopener"
                  >
                    exit_0
                  </a>
                </li>
                <li>
                  <a
                    href="https://github.com/vonds/sentinel"
                    target="_blank"
                    rel="noopener"
                  >
                    Sentinel
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0 Documentation
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 108: Kernel Module Fundamentals
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="./lab107.html"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="./lab109.html"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Inspect loaded kernel modules, read module metadata, and load and
                unload a safe module using standard tooling. Verify module state
                using direct module listings and kernel-exposed sources.
              </p>

              <!-- Video (kept on page; removed from left panel) -->
              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/uJk54bhaadA?si=seGSukCoMFN7ohRo"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">kernel</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">modules</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">core</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>

                <p>
                  Your team needs a repeatable workflow for validating kernel
                  module state during troubleshooting. You will list loaded
                  modules, inspect module metadata, load and unload a safe
                  module, and verify state changes using standard tools.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    Treat module operations as a controlled change. Unloading the
                    wrong module can impact storage, networking, graphics, or
                    security controls.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>View loaded kernel modules and interpret the output.</li>
                  <li>
                    Inspect a module’s metadata using
                    <code>modinfo</code>
                    .
                  </li>
                  <li>
                    Load a safe module using
                    <code>modprobe</code>
                    .
                  </li>
                  <li>
                    Verify module presence using
                    <code>lsmod</code>
                    and
                    <code>/proc/modules</code>
                    .
                  </li>
                  <li>Practice passing a module parameter during load.</li>
                  <li>Remove the module safely and confirm removal.</li>
                </ul>
              </section>

              <!-- Concepts (no alt-background moving forward) -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    Module visibility and dependency signals from
                    <code>lsmod</code>
                    output (name, size, use count).
                  </li>
                  <li>
                    Module metadata as your source of truth:
                    <code>modinfo</code>
                    (filename, description, license, parameters, aliases).
                  </li>
                  <li>
                    Dependency-aware load and removal with
                    <code>modprobe</code>
                    and
                    <code>modprobe -r</code>
                    .
                  </li>
                  <li>
                    Kernel-exported module state via
                    <code>/proc/modules</code>
                    for alternate validation and scripting.
                  </li>
                  <li>
                    Parameter passing patterns and why changes usually require a
                    reload to apply.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Show the first 10 lines of loaded kernel modules.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">lsmod | head -n 10</code></pre>
                  </div>

                  <p>
                    <code>lsmod</code>
                    shows what is loaded right now. The
                    <code>Used by</code>
                    count helps you estimate whether a module is likely to unload
                    cleanly and what else may depend on it.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>Module                  Size  Used by
xfs                   999424  1
e1000                 155648  0</code></pre>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : Display metadata for the
                    <code>loop</code>
                    module.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">modinfo loop</code></pre>
                  </div>

                  <p>
                    <code>modinfo</code>
                    answers “what is this module,” “where is it on disk,” and
                    “what options does it accept.” Use this to confirm you are
                    operating on the correct module before loading it or
                    debugging why it will not load.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Example fields to confirm:
filename:       /lib/modules/.../kernel/drivers/block/loop.ko
description:    Loopback block device
license:        GPL
parm:           max_loop:int</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Load the
                    <code>loop</code>
                    module into the kernel.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">sudo modprobe loop</code></pre>
                  </div>

                  <p>
                    <code>modprobe</code>
                    loads the module and resolves dependencies automatically. If
                    the module is already loaded or built into the kernel, you
                    may see no output.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># No output is normal on success.</code></pre>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Confirm that
                    <code>loop</code>
                    is loaded.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4a"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4a">lsmod | grep -E '^loop(\s|$)'</code></pre>
                  </div>

                  <p>
                    Filtering
                    <code>lsmod</code>
                    output is the fastest way to prove the module is present. If
                    it does not appear, confirm whether the module is built-in
                    or inspect errors from the load attempt.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>loop                   45056  0</code></pre>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Alternate</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4b"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4b">grep -E '^loop ' /proc/modules</code></pre>
                  </div>

                  <p>
                    <code>/proc/modules</code>
                    is a kernel-exported view of module state and can be used as
                    an alternate verification source.
                  </p>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>
                    : Load with a module parameter.
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Parameter behavior</div>
                    <p class="m-b-0">
                      Parameters apply at load time. If the module is already
                      loaded, the new value may not take effect until the module
                      is unloaded and loaded again.
                    </p>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">sudo modprobe loop max_loop=8</code></pre>
                  </div>

                  <p>
                    This demonstrates the parameter syntax. Use
                    <code>modinfo</code>
                    output to confirm supported parameter names and expected
                    types before applying them.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># If you need to apply a parameter reliably:
sudo modprobe -r loop && sudo modprobe loop max_loop=8</code></pre>
                  </div>
                </div>

                <!-- Step 6 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 6</strong>
                    : Remove the
                    <code>loop</code>
                    module and confirm removal.
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Safety note</div>
                    <p class="m-b-0">
                      A module may refuse to unload if it is in use. That
                      failure is a safety feature. Confirm dependencies before
                      retrying removal.
                    </p>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-6"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-6">sudo modprobe -r loop</code></pre>
                  </div>

                  <p>
                    <code>modprobe -r</code>
                    removes the module with dependency awareness. If the module
                    is still needed, the command may fail with an “in use”
                    message.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code># Verify removal:
lsmod | grep -E '^loop(\s|$)'</code></pre>
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Alternate</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-6b"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-6b">sudo rmmod loop</code></pre>
                  </div>

                  <p>
                    <code>rmmod</code>
                    removes a module directly and does not resolve dependencies.
                    Prefer
                    <code>modprobe -r</code>
                    for normal operations.
                  </p>
                </div>
              </section>

              <!-- Common breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    modprobe fails: “module not found”
                  </div>
                  <p class="m-b-0">
                    The module is not available for the running kernel. Confirm
                    your kernel version and module path, then verify that module
                    packages are installed for that kernel.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    modprobe -r fails: “module is in use”
                  </div>
                  <p class="m-b-0">
                    A dependency or active consumer is preventing removal.
                    Identify what is using the module, stop the dependent
                    service or workload, then retry. Do not force removal
                    without understanding impact.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    lsmod does not show the module after load
                  </div>
                  <p class="m-b-0">
                    The module may be built into the kernel or the load failed.
                    Re-check
                    <code>modinfo</code>
                    and validate state via
                    <code>/proc/modules</code>
                    . If needed, inspect recent kernel messages for load errors.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    Parameter changes do not appear to apply
                  </div>
                  <p class="m-b-0">
                    Parameters are applied at load time. If the module was
                    already loaded, unload it and reload with the parameter to
                    ensure the new value is applied.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  This lab changes kernel state only if you loaded the module.
                  Your cleanup is ensuring the module is removed (if you loaded
                  it) and that module state looks normal afterward.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button
                      class="lab-copy-btn"
                      type="button"
                      data-copy="#cmd-cleanup"
                    >
                      Copy
                    </button>
                  </div>
                  <pre><code id="cmd-cleanup">lsmod | grep -E '^loop(\s|$)'
grep -E '^loop ' /proc/modules || true</code></pre>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Success signal</div>
                  <p class="m-b-0">
                    You can prove module load state, inspect supported
                    parameters, and perform a safe load/unload workflow without
                    guessing.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>lsmod</code>
                    : Lists currently loaded kernel modules.
                    <ul>
                      <li>
                        Output includes module name, size, and “Used by” count.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>modinfo &lt;module&gt;</code>
                    : Displays metadata for a kernel module.
                    <ul>
                      <li>
                        Common fields include
                        <code>filename</code>
                        ,
                        <code>description</code>
                        ,
                        <code>license</code>
                        , and
                        <code>parm</code>
                        entries for parameters.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>modprobe &lt;module&gt; [param=value]</code>
                    : Loads a module and resolves dependencies.
                    <ul>
                      <li>
                        Parameters apply at load time and may require a reload to
                        take effect.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>modprobe -r &lt;module&gt;</code>
                    : Unloads a module (if not in use).
                    <ul>
                      <li>
                        <code>-r</code>
                        : Removes (unloads) the module.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>rmmod &lt;module&gt;</code>
                    : Removes a module directly without dependency resolution.
                  </li>

                  <li>
                    <code>/proc/modules</code>
                    : Kernel-exported view of loaded modules (name, size, use
                    count).
                  </li>

                  <li>
                    <code>grep -E &lt;regex&gt; &lt;file&gt;</code>
                    : Filters lines that match a regex.
                    <ul>
                      <li>
                        <code>-E</code>
                        : Enables extended regular expressions.
                      </li>
                    </ul>
                  </li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy;
                <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear()
    </script>
  </body>
</html>
