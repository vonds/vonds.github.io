<!-- lab126.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 126</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet" />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a href="https://github.com/vonds/exit_0" target="_blank" rel="noopener">
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 126: Dynamic Linker &amp; shared library discovery
          </h2>

          <nav class="lab-pagination">
            <a id="prev-lab" class="lab-nav-link" href="#" aria-label="Previous lab">&laquo;</a>
            <a id="next-lab" class="lab-nav-link" href="#" aria-label="Next lab">&raquo;</a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Inspect dynamic library dependencies with <code>ldd</code>, understand how the dynamic linker finds
                libraries, and safely add a custom library directory (<code>/opt/mylib</code>) using
                <code>/etc/ld.so.conf.d</code> + <code>ldconfig</code>. Finish by validating the cache and using
                <code>LD_LIBRARY_PATH</code> for a temporary override.
              </p>

              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/REPLACE_WITH_LAB126_VIDEO"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip"><span class="lab-chip-key">linker</span></span>
                  <span class="lab-chip"><span class="lab-chip-key">shared-libs</span></span>
                  <span class="lab-chip"><span class="lab-chip-key">ldconfig</span></span>
                  <span class="lab-chip"><span class="lab-chip-key">troubleshooting</span></span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Scenario</h3>

                <p>
                  A vendor shipped a binary that depends on a custom shared library. The library was dropped under
                  <code>/opt/mylib</code> and the binary now fails to start because the dynamic linker cannot find it.
                  Your job is to inspect dependencies, make the new library path discoverable, refresh the cache, and
                  verify the loader sees the directory. You also practice a temporary override with
                  <code>LD_LIBRARY_PATH</code>.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Why this matters</div>
                  <p class="m-b-0">
                    “Missing shared library” errors are common in vendor tooling and legacy binaries. The fix is usually
                    not “reinstall everything” but “prove what the binary needs, then teach the loader where to look.”
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Objective</h3>
                <ul>
                  <li>Use <code>ldd</code> to inspect shared library dependencies for a known binary.</li>
                  <li>Inspect the dynamic linker cache with <code>ldconfig -p</code>.</li>
                  <li>Understand how <code>/etc/ld.so.conf</code> includes snippet files under <code>/etc/ld.so.conf.d</code>.</li>
                  <li>Add <code>/opt/mylib</code> to the loader search path via a new snippet file.</li>
                  <li>Rebuild the loader cache with <code>ldconfig</code> and verify it scans the new directory.</li>
                  <li>Use <code>LD_LIBRARY_PATH</code> as a temporary, per-shell override.</li>
                </ul>
              </section>

              <!-- Mental model -->
              <section class="lab-section alt-background" id="mentalmodel">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Mental model</h3>

                <p>
                  At runtime, the dynamic loader (<code>ld-linux</code>) resolves shared libraries for ELF binaries. It
                  searches locations in a defined order. The two levers you control most often are:
                </p>

                <ul>
                  <li>
                    <strong>Persistent system config</strong>: add directories via
                    <code>/etc/ld.so.conf</code> / <code>/etc/ld.so.conf.d/*.conf</code>, then run
                    <code>ldconfig</code> to rebuild <code>ld.so.cache</code>.
                  </li>
                  <li>
                    <strong>Temporary shell override</strong>: set <code>LD_LIBRARY_PATH</code> to prepend search paths
                    for the current process tree.
                  </li>
                </ul>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operational habit</div>
                  <p class="m-b-0">
                    Prefer <code>ld.so.conf.d</code> + <code>ldconfig</code> for stable deployments. Use
                    <code>LD_LIBRARY_PATH</code> for testing and containment, not as a long-term fix.
                  </p>
                </div>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Walkthrough</h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>: Show shared libraries required by <code>/bin/ls</code>.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-1">Copy</button>
                    </div>
                    <pre><code id="cmd-step-1">ldd /bin/ls</code></pre>
                  </div>

                  <p>
                    This prints the loader resolution results: which libraries are needed and what file paths they map to.
                    If a dependency cannot be found, you will typically see <code>not found</code>.
                  </p>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>: Inspect the loader cache.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-2">Copy</button>
                    </div>
                    <pre><code id="cmd-step-2">ldconfig -p | head</code></pre>
                  </div>

                  <p>
                    <code>ldconfig -p</code> shows what is currently known in <code>ld.so.cache</code>. If your library path
                    is not configured, it will not show up here.
                  </p>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>: Confirm how <code>ld.so.conf</code> is wired.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-3">Copy</button>
                    </div>
                    <pre><code id="cmd-step-3">grep -E '^[^#]' /etc/ld.so.conf</code></pre>
                  </div>

                  <p>
                    Most systems include snippet files via <code>/etc/ld.so.conf.d/*.conf</code>. That is where you add
                    custom paths.
                  </p>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>: List snippet files.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-4">Copy</button>
                    </div>
                    <pre><code id="cmd-step-4">ls -1 /etc/ld.so.conf.d</code></pre>
                  </div>

                  <p>
                    These files define additional search directories. Keep your custom changes isolated in a single,
                    clearly-named snippet.
                  </p>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>: Add <code>/opt/mylib</code> via a new snippet.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-5">Copy</button>
                    </div>
                    <pre><code id="cmd-step-5">echo /opt/mylib | sudo tee /etc/ld.so.conf.d/mylib.conf</code></pre>
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Expectation</div>
                    <p class="m-b-0">
                      This only writes configuration. The loader cache will not change until you run <code>ldconfig</code>.
                    </p>
                  </div>
                </div>

                <!-- Step 6 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 6</strong>: Refresh the dynamic linker cache.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-6">Copy</button>
                    </div>
                    <pre><code id="cmd-step-6">sudo ldconfig</code></pre>
                  </div>

                  <p>
                    <code>ldconfig</code> scans configured directories and rebuilds <code>ld.so.cache</code>.
                  </p>
                </div>

                <!-- Step 7 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 7</strong>: Prove <code>ldconfig</code> sees the new directory.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-7">Copy</button>
                    </div>
                    <pre><code id="cmd-step-7">sudo ldconfig -v 2>/dev/null | grep -m1 /opt/mylib</code></pre>
                  </div>

                  <p>
                    This is a quick sanity check. If the directory does not appear, the snippet was not read or is malformed.
                  </p>
                </div>

                <!-- Step 8 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 8</strong>: Set <code>LD_LIBRARY_PATH</code> for the current shell.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button class="lab-copy-btn" type="button" data-copy="#cmd-step-8">Copy</button>
                    </div>
                    <pre><code id="cmd-step-8">export LD_LIBRARY_PATH=/opt/mylib:$LD_LIBRARY_PATH</code></pre>
                  </div>

                  <p>
                    This temporarily prepends <code>/opt/mylib</code> for processes launched from the current shell. It does
                    not modify system configuration and will not persist across sessions.
                  </p>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Common usage</div>
                    <p class="m-b-0">
                      Use this when testing a vendor binary before you commit to a system-wide change, or to contain impact
                      to a single service wrapper / environment file.
                    </p>
                  </div>
                </div>

                <!-- Optional: alien note -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Optional</strong>: Where <code>alien</code> fits in (conceptual).
                  </div>

                  <p>
                    If a vendor only provides a <code>.deb</code> package, <code>alien</code> can convert it to an RPM. In
                    production, prefer vendor-native packages or containerized delivery when possible. Conversions can
                    install files into unexpected paths, which is one reason dynamic library issues appear afterward.
                  </p>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Practice idea</div>
                    <p class="m-b-0">
                      If you later add an <code>alien</code> step to the lab, include a post-install check:
                      <code>rpm -ql &lt;pkg&gt;</code> and <code>ldd</code> on the installed binary to immediately surface
                      missing libraries.
                    </p>
                  </div>
                </div>
              </section>

              <!-- Common breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Common breakpoints</h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">ldd shows “not found”</div>
                  <p class="m-b-0">
                    The library is missing, the path is not configured, or the library name/soname does not match what the
                    binary requests. Confirm the library exists under <code>/opt/mylib</code> and rebuild the cache with
                    <code>ldconfig</code>.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Your snippet exists but ldconfig doesn’t scan it</div>
                  <p class="m-b-0">
                    The snippet file must contain a valid directory path on its own line. Also confirm <code>/etc/ld.so.conf</code>
                    includes <code>/etc/ld.so.conf.d/*.conf</code>.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">LD_LIBRARY_PATH “fixes” it, but only sometimes</div>
                  <p class="m-b-0">
                    That’s expected. It only affects the current shell’s process tree. Services started by systemd will not
                    inherit it unless explicitly configured in the unit or environment file.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Security/ops concern: global library path changes</div>
                  <p class="m-b-0">
                    Adding global search paths changes how multiple binaries resolve libraries. Keep paths narrow, prefer
                    dedicated directories, and revalidate the vendor binary with <code>ldd</code> after changes.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">Reference</h3>

                <ul class="lab-reference-list">
                  <li><code>ldd /path/to/binary</code>: show runtime shared library dependencies.</li>
                  <li><code>ldconfig -p</code>: display the current loader cache contents.</li>
                  <li><code>/etc/ld.so.conf</code>: top-level loader config (often includes <code>ld.so.conf.d</code>).</li>
                  <li><code>/etc/ld.so.conf.d/*.conf</code>: drop-in directories for custom search paths.</li>
                  <li><code>sudo ldconfig</code>: rebuild the loader cache.</li>
                  <li><code>sudo ldconfig -v</code>: verbose scan output (good for proving a directory is read).</li>
                  <li><code>LD_LIBRARY_PATH</code>: temporary override for library search order.</li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a href="https://github.com/vonds" target="_blank" rel="noopener">Github</a>
                </li>
                <li>
                  <a href="https://www.linkedin.com/in/vonds/" target="_blank" rel="noopener">Linkedin</a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy; <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.css"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear()
    </script>
  </body>
</html>
