<!-- lab064.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 064</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dosis"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a
                    href="https://github.com/vonds/exit_0"
                    target="_blank"
                    rel="noopener"
                  >
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank" rel="noopener">
                    exit_0 Documentation
                  </a>
                </li>
                <li>
                  <a
                    href="https://github.com/vonds/sentinel"
                    target="_blank"
                    rel="noopener"
                  >
                    Sentinel
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 64: SSH Keys - Passwordless Authentication
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Set up SSH key-based authentication so routine logins no longer
                depend on passwords. Generate a key pair, install the public key
                on the remote account, then validate that the connection
                succeeds without prompting.
              </p>

              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/n7e0raZLjJ4?si=m8zHgrGRqFT06eiP"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">ssh</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">auth</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">core</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>

                <p>
                  You connect to the same server frequently and want to remove
                  repeated password entry from your workflow. Your task is to
                  generate an SSH key pair locally, copy the public key to the
                  remote account, and confirm that you can log in using the key.
                  This improves efficiency and security when the private key is
                  protected and server policy is configured correctly.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    In production, key-based access is typically paired with a
                    passphrase, an agent (<code>ssh-agent</code>), and tighter
                    server-side controls (often disabling password auth after
                    validation). This lab focuses on the core setup and proof.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>Generate a new SSH key pair for the local user.</li>
                  <li>
                    Install the public key on the remote account using
                    <code>ssh-copy-id</code>.
                  </li>
                  <li>
                    Validate that SSH login completes without a password prompt.
                  </li>
                  <li>Exit the remote session cleanly.</li>
                </ul>
              </section>

              <!-- Concepts -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    The private key stays on your machine and proves identity.
                    The public key is installed on the server.
                  </li>
                  <li>
                    Server-side authorization is controlled by
                    <code>~/.ssh/authorized_keys</code> for that account.
                  </li>
                  <li>
                    Correct permissions matter. SSH may ignore keys if
                    <code>~/.ssh</code> or <code>authorized_keys</code> is too
                    permissive.
                  </li>
                  <li>
                    “Passwordless” usually means “no password prompt” because
                    the key is used. In real setups, you still protect the
                    private key with a passphrase and an agent.
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Generate an SSH key pair.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">ssh-keygen -t ed25519</code></pre>
                  </div>

                  <p>
                    This generates a new private/public key pair in
                    <code>~/.ssh/</code>. The private key stays local and must
                    be protected. The public key is what you install on the
                    remote server.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>Generating public/private ed25519 key pair.
Enter file in which to save the key (/home/lab/.ssh/id_ed25519):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/lab/.ssh/id_ed25519
Your public key has been saved in /home/lab/.ssh/id_ed25519.pub</code></pre>
                  </div>

                  <div class="lab-callout">
                    <div class="lab-callout-label">Recommendation</div>
                    <p class="m-b-0">
                      Use a passphrase. Pair it with <code>ssh-agent</code> so
                      you keep usability without leaving the private key
                      unprotected.
                    </p>
                  </div>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : Copy the public key to the remote server.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">ssh-copy-id -i ~/.ssh/id_ed25519.pub labuser@192.168.1.50</code></pre>
                  </div>

                  <p>
                    This appends your public key to the remote user's
                    <code>~/.ssh/authorized_keys</code> file. You typically enter
                    the remote password once during this step.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/lab/.ssh/id_ed25519.pub"
Number of key(s) added: 1
Now try logging into the machine, with:
  ssh 'labuser@192.168.1.50'</code></pre>
                  </div>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Log in using key-based authentication.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">ssh labuser@192.168.1.50</code></pre>
                  </div>

                  <p>
                    If the key is accepted and permissions are correct, the
                    session should start without prompting for the account
                    password. If you set a key passphrase, you may be prompted
                    for the passphrase (or your agent will handle it).
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>Welcome to 192.168.1.50.
Last login: Tue Feb 10 21:03:11 2026 from 192.168.1.10</code></pre>
                  </div>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Confirm the key is being used.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4">echo "$SSH_CONNECTION"</code></pre>
                  </div>

                  <p>
                    This prints connection metadata for the current SSH session.
                    If you are logged in, SSH authentication has already
                    succeeded. This is a simple “sanity check” that you are in a
                    remote session.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>192.168.1.10 53422 192.168.1.50 22</code></pre>
                  </div>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt bold">Step 5</strong>
                    : Exit the SSH session.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">exit</code></pre>
                  </div>

                  <p>
                    This cleanly closes the remote shell and returns you to the
                    local session.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>Connection to 192.168.1.50 closed.</code></pre>
                  </div>
                </div>
              </section>

              <!-- Breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    Still prompted for the account password
                  </div>
                  <p class="m-b-0">
                    The key may not be installed, or the server may be refusing
                    it. Confirm the public key exists in
                    <code>~/.ssh/authorized_keys</code> on the remote account and
                    verify permissions are not too open.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    ssh-copy-id fails or command not found
                  </div>
                  <p class="m-b-0">
                    Some minimal systems do not ship <code>ssh-copy-id</code>. You
                    can manually append the public key to
                    <code>~/.ssh/authorized_keys</code> on the remote host.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    Permission denied (publickey)
                  </div>
                  <p class="m-b-0">
                    The server is requiring a key, but it is not accepting yours.
                    Ensure you are using the correct private key and the matching
                    public key is installed for that user.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Key ignored due to permissions</div>
                  <p class="m-b-0">
                    SSH can ignore keys if <code>~/.ssh</code> or
                    <code>authorized_keys</code> is group/world-writable. Fix
                    permissions and try again.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  If you want to remove access, delete the key line from the
                  remote user’s <code>~/.ssh/authorized_keys</code>. If this was
                  a throwaway key, remove the local key pair from
                  <code>~/.ssh</code>.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button
                      class="lab-copy-btn"
                      type="button"
                      data-copy="#cmd-cleanup"
                    >
                      Copy
                    </button>
                  </div>
                  <pre><code id="cmd-cleanup"># remote (on 192.168.1.50 as labuser)
vim ~/.ssh/authorized_keys

# local (on your machine)
rm -f ~/.ssh/id_ed25519 ~/.ssh/id_ed25519.pub</code></pre>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>ssh-keygen -t ed25519</code>
                    : Generates a new Ed25519 key pair in <code>~/.ssh/</code>.
                    <ul>
                      <li>
                        <code>-t ed25519</code>
                        : Selects the Ed25519 key type.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>~/.ssh/id_ed25519</code>
                    : Private key file. Keep protected and never copy to remote
                    systems.
                  </li>

                  <li>
                    <code>~/.ssh/id_ed25519.pub</code>
                    : Public key file. Install this on remote systems.
                  </li>

                  <li>
                    <code>ssh-copy-id -i &lt;pubkey&gt; user@host</code>
                    : Installs a public key into the remote user’s
                    <code>~/.ssh/authorized_keys</code>.
                    <ul>
                      <li>
                        <code>-i &lt;pubkey&gt;</code>
                        : Selects the public key file to install.
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>~/.ssh/authorized_keys</code>
                    : Remote file containing public keys allowed to authenticate
                    for the account.
                  </li>

                  <li>
                    <code>ssh user@host</code>
                    : Initiates an SSH session. If key-based authentication is
                    configured correctly, it can succeed without prompting for
                    the account password.
                  </li>

                  <li>
                    <code>exit</code>
                    : Closes the remote shell session and terminates the SSH
                    connection.
                  </li>
                </ul>
              </section>

              <!-- /main -->
            </div>
          </div>

          <nav class="lab-pagination">
            <a
              id="back-to-top"
              class="lab-nav-link"
              href="#"
              aria-label="Back to top"
            >
              &uArr;
            </a>
          </nav>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy;
                <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear()
    </script>
  </body>
</html>
