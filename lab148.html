<!-- lab148.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="exit_0 Documentation" />
    <meta name="name" content="Vonds" />

    <title>Vonds | Lab 148</title>

    <!-- Favicons -->
    <link rel="shortcut icon" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../assets/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../assets/images/apple-touch-icon-114x114.png"
    />

    <!-- Site styles (your existing) -->
    <link href="../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/linea-icons.css" rel="stylesheet" />
    <link href="../assets/css/ionicons.min.css" rel="stylesheet" />
    <link href="../assets/css/simpletextrotator.css" rel="stylesheet" />
    <link href="../assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="../assets/css/owl.carousel.css" rel="stylesheet" />
    <link href="../assets/css/superslides.css" rel="stylesheet" />
    <link href="../assets/css/vertical.css" rel="stylesheet" />
    <link href="../assets/css/animate.css" rel="stylesheet" />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/docs.css" rel="stylesheet" />

    <!-- Lab page styles -->
    <link href="../assets/css/lab.css" rel="stylesheet" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dosis"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- PRELOADER -->
    <div class="page-loader">
      <div class="loader">Loading...</div>
    </div>

    <!-- OVERLAY MENU -->
    <div id="overlay-menu" class="overlay-menu">
      <a href="#" id="overlay-menu-hide" class="navigation-hide">
        <i class="ion-close-round"></i>
      </a>

      <div class="overlay-menu-inner">
        <nav class="overlay-menu-nav">
          <ul id="nav">
            <li><a href="../index.html">Home</a></li>

            <li class="slidedown">
              <a href="#">Portfolio</a>
              <ul>
                <li>
                  <a href="https://github.com/vonds/exit_0" target="_blank">
                    exit_0
                  </a>
                </li>
                <li>
                  <a href="https://github.com/vonds/sentinel" target="_blank">
                    Sentinel
                  </a>
                </li>
                <li>
                  <a href="docs.html" target="_blank">exit_0 Documentation</a>
                </li>
              </ul>
            </li>

            <li>
              <a
                href="https://www.linkedin.com/in/vonds/"
                target="_blank"
                rel="noopener"
              >
                LinkedIn
              </a>
            </li>
            <li>
              <a href="https://github.com/vonds" target="_blank" rel="noopener">
                Github
              </a>
            </li>
            <li>
              <a href="mailto:vonds13@gmail.com?subject=Hello Vonds">Contact</a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="overlay-navigation-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 text-center">
              <p class="copyright font-alt m-b-0">
                VONDS &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WRAPPER -->
    <div class="wrapper">
      <!-- NAVIGATION -->
      <nav
        class="navbar navbar-custom navbar-transparent navbar-light navbar-fixed-top"
      >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">
              <img src="../assets/images/logo-dark.png" width="95" alt="" />
            </a>
          </div>

          <ul id="icons-navbar" class="nav navbar-nav navbar-right">
            <li>
              <a href="#" id="toggle-menu" class="show-overlay" title="Menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- DOCS PAGE -->
      <section class="module">
        <div class="container">
          <h2 class="font-alt module-title m-t-60">
            Lab 148: User Crontab Workflow
          </h2>

          <nav class="lab-pagination">
            <a
              id="prev-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Previous lab"
            >
              &laquo;
            </a>
            <a
              id="next-lab"
              class="lab-nav-link"
              href="#"
              aria-label="Next lab"
            >
              &raquo;
            </a>
          </nav>

          <div class="row">
            <!-- LEFT SIDEBAR -->
            <div class="col-sm-4 col-md-3 lab-sidebar">
              <div class="docs-sidebar">
                <div class="docs-widget">
                  <h5 class="widget-title">
                    <a href="./docs.html">Back to Lab Index</a>
                  </h5>
                  <ul class="docs-nav">
                    <li><a href="#scenario">Scenario</a></li>
                    <li><a href="#objective">Objective</a></li>
                    <li><a href="#concepts">Concepts</a></li>
                    <li><a href="#walkthrough">Walkthrough</a></li>
                    <li><a href="#breakpoints">Breakpoints</a></li>
                    <li><a href="#cleanup">Cleanup</a></li>
                    <li><a href="#reference">Reference</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-sm-8 col-md-9 lab-doc">
              <p class="m-b-20 lab-summary">
                Configure user crontab entries using correct 5-field scheduling,
                control cron email behavior with output redirection and MAILTO,
                and verify the crontab helper’s setuid permissions so ordinary
                users can safely manage their own cron jobs.
              </p>

              <!-- Video (kept on page; removed from left panel) -->
              <section class="lab-section" id="video" aria-label="Lab video">
                <div class="lab-video">
                  <div class="lab-video-embed text-center">
                    <iframe
                      src="https://www.youtube.com/embed/2H5i9e4vvBM?si=fAm_OXqClzZm4LKF"
                      title="YouTube video player"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      referrerpolicy="strict-origin-when-cross-origin"
                      allowfullscreen
                    ></iframe>
                  </div>
                </div>
              </section>

              <!-- Scenario -->
              <section class="lab-section" id="scenario">
                <div class="lab-chips" aria-label="Tags">
                  <span class="lab-chip">
                    <span class="lab-chip-key">services</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">core</span>
                  </span>
                  <span class="lab-chip">
                    <span class="lab-chip-key">troubleshooting</span>
                  </span>
                </div>

                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Scenario
                </h3>

                <p>
                  You need to configure user cron jobs correctly, control email
                  output behavior for scheduled tasks, and verify the
                  <code>crontab</code>
                  tool’s permissions so ordinary users can edit their own
                  schedules without direct write access to cron spool files.
                </p>

                <div class="lab-callout">
                  <div class="lab-callout-label">Operator context</div>
                  <p class="m-b-0">
                    Cron failures are often silent. Correct schedules, explicit
                    output handling, and basic permission validation prevent
                    “it ran but I never saw it” incidents.
                  </p>
                </div>
              </section>

              <!-- Objective -->
              <section class="lab-section alt-background" id="objective">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Objective
                </h3>
                <ul>
                  <li>Open or create your user crontab.</li>
                  <li>Write a correct schedule line for a weekly job.</li>
                  <li>
                    Control cron mail behavior by redirecting standard output
                    only.
                  </li>
                  <li>Edit an entry to remove redirection cleanly.</li>
                  <li>Route all cron mail output to a specific user with MAILTO.</li>
                  <li>Verify the crontab binary’s permissions with ls -l.</li>
                </ul>
              </section>

              <!-- Concepts (no alt-background moving forward) -->
              <section class="lab-section" id="concepts">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Concepts
                </h3>
                <ul>
                  <li>
                    User crontab management with
                    <code>crontab -e</code>
                    .
                  </li>
                  <li>
                    Cron’s 5-field schedule format (minute, hour, day of month,
                    month, day of week).
                  </li>
                  <li>
                    Output and mail behavior: cron emails any output produced by
                    the job unless redirected or suppressed.
                  </li>
                  <li>
                    Redirecting only stdout with
                    <code>&gt;&gt; file</code>
                    so stderr is still mailed.
                  </li>
                  <li>
                    Using
                    <code>MAILTO=...</code>
                    to route cron mail for the entire crontab.
                  </li>
                  <li>
                    Why
                    <code>/usr/bin/crontab</code>
                    is commonly setuid root (writes into protected cron spool
                    areas).
                  </li>
                </ul>
              </section>

              <!-- Walkthrough -->
              <section class="lab-section alt-background" id="walkthrough">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Walkthrough
                </h3>

                <!-- Step 1 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 1</strong>
                    : Open or create your user crontab.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-1"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-1">crontab -e</code></pre>
                  </div>

                  <p>
                    This opens your personal crontab in an editor. On first use,
                    it creates the file. You do not edit cron spool files
                    directly. The
                    <code>crontab</code>
                    command handles safe installation.
                  </p>
                </div>

                <!-- Step 2 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 2</strong>
                    : Run date every Friday at 1:00 PM.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Crontab line</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-2"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-2">0 13 * * 5 date</code></pre>
                  </div>

                  <p>
                    Minute
                    <code>0</code>
                    at hour
                    <code>13</code>
                    (1 PM), any day-of-month, any month, day-of-week
                    <code>5</code>
                    (Friday). This is the standard 5-field format for user
                    crontabs.
                  </p>
                </div>

                <!-- Step 3 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 3</strong>
                    : Run foobar every minute, redirecting only stdout to a log.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Crontab line</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-3"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-3">* * * * * ~/foobar.sh >> ~/output.log</code></pre>
                  </div>

                  <p>
                    <code>&gt;&gt;</code>
                    appends standard output to the file. Standard error is not
                    redirected here, so stderr still triggers cron mail. This is
                    a useful pattern when you want a log for normal output but
                    still want error visibility.
                  </p>
                </div>

                <!-- Step 4 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 4</strong>
                    : Remove the redirection from the foobar entry.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Crontab line</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-4"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-4">* * * * * ~/foobar.sh</code></pre>
                  </div>

                  <p>
                    Removing redirection means any output (stdout or stderr)
                    becomes eligible for cron mail delivery (subject to MAILTO).
                    This is a common troubleshooting move when you suspect a job
                    is failing silently.
                  </p>
                </div>

                <!-- Step 5 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 5</strong>
                    : Route all cron mail output to emma.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Crontab setting</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-5"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-5">MAILTO=emma</code></pre>
                  </div>

                  <p>
                    Place
                    <code>MAILTO=emma</code>
                    near the top of the crontab. It sets the recipient for mail
                    generated by any job output in that crontab.
                  </p>
                </div>

                <!-- Step 6 -->
                <div class="lab-step">
                  <div class="lab-step-title">
                    <strong class="font-alt">Step 6</strong>
                    : Verify permissions on the crontab binary.
                  </div>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <div class="lab-codeblock-header">
                      <span>Command</span>
                      <button
                        class="lab-copy-btn"
                        type="button"
                        data-copy="#cmd-step-6"
                      >
                        Copy
                      </button>
                    </div>
                    <pre><code id="cmd-step-6">ls -l /usr/bin/crontab</code></pre>
                  </div>

                  <p>
                    Many systems ship
                    <code>crontab</code>
                    as setuid root so users can install their crontabs into
                    protected spool directories. In a long listing, the setuid
                    bit appears as an
                    <code>s</code>
                    in the user execute position.
                  </p>

                  <div class="lab-codeblock m-b-40 m-t-40">
                    <pre><code>-rwsr-xr-x 1 root root  ... /usr/bin/crontab</code></pre>
                  </div>
                </div>
              </section>

              <!-- Common breakpoints -->
              <section class="lab-section" id="breakpoints">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Common breakpoints
                </h3>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    crontab -e fails with “you are not allowed to use this program”
                  </div>
                  <p class="m-b-0">
                    Check
                    <code>/etc/cron.allow</code>
                    and
                    <code>/etc/cron.deny</code>
                    policy on the system. If access is restricted, only approved
                    users can create or edit crontabs.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    Job runs but output is missing
                  </div>
                  <p class="m-b-0">
                    Cron runs with a minimal environment. Use full paths, ensure
                    the script is executable, and redirect output intentionally.
                    If you redirected stdout, errors may still be mailed, and if
                    mail is not configured you may see nothing.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    MAILTO set but nobody receives mail
                  </div>
                  <p class="m-b-0">
                    MAILTO controls the recipient, but mail delivery still
                    depends on a working local MTA configuration. Confirm mail
                    tooling is present and logs show successful delivery.
                  </p>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">
                    /usr/bin/crontab is not setuid
                  </div>
                  <p class="m-b-0">
                    Behavior varies by distribution and policy. If the binary is
                    not setuid, user cron management may rely on different
                    mechanisms. Treat it as a configuration/policy check and
                    verify how cron is implemented on that system.
                  </p>
                </div>
              </section>

              <!-- Cleanup -->
              <section class="lab-section alt-background" id="cleanup">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Cleanup checklist
                </h3>

                <p>
                  Remove test entries so you do not leave noisy schedules behind
                  on shared lab hosts. You can either edit the crontab and delete
                  the lines or clear the user crontab entirely.
                </p>

                <div class="lab-codeblock m-b-40 m-t-40">
                  <div class="lab-codeblock-header">
                    <span>Commands</span>
                    <button
                      class="lab-copy-btn"
                      type="button"
                      data-copy="#cmd-cleanup"
                    >
                      Copy
                    </button>
                  </div>
                  <pre><code id="cmd-cleanup">crontab -e
# OR (destructive: removes the entire user crontab)
crontab -r</code></pre>
                </div>

                <div class="lab-callout">
                  <div class="lab-callout-label">Success signal</div>
                  <p class="m-b-0">
                    <code>crontab -l</code>
                    shows only the entries you intend to keep, or nothing at all
                    if you removed the crontab.
                  </p>
                </div>
              </section>

              <!-- Reference -->
              <section class="lab-section" id="reference">
                <h3 class="font-alt lab-section-title m-b-40 m-t-40">
                  Reference
                </h3>

                <ul class="lab-reference-list">
                  <li>
                    <code>crontab -e</code>
                    : Opens your user crontab for editing.
                    <ul>
                      <li>
                        <code>-e</code>
                        : Edit (create if missing).
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>* * * * * &lt;command&gt;</code>
                    : Cron schedule format: minute hour day-of-month month day-of-week.
                  </li>

                  <li>
                    <code>MAILTO=&lt;user&gt;</code>
                    : Routes cron mail for any job output to a specific user.
                  </li>

                  <li>
                    <code>&gt; file</code>
                    : Redirects stdout to a file (overwrite).
                  </li>

                  <li>
                    <code>&gt;&gt; file</code>
                    : Redirects stdout to a file (append).
                  </li>

                  <li>
                    <code>ls -l /usr/bin/crontab</code>
                    : Shows permissions and ownership for the crontab binary.
                    <ul>
                      <li>
                        <code>s</code>
                        : Setuid bit when shown in the user execute position (example:
                        <code>-rwsr-xr-x</code>
                        ).
                      </li>
                    </ul>
                  </li>

                  <li>
                    <code>crontab -l</code>
                    : Lists the current user crontab.
                  </li>

                  <li>
                    <code>crontab -r</code>
                    : Removes the current user crontab.
                    <ul>
                      <li>
                        <code>-r</code>
                        : Remove (destructive).
                      </li>
                    </ul>
                  </li>
                </ul>
              </section>
            </div>
            <!-- /main -->
          </div>
          <!-- /row -->
        </div>
        <!-- /container -->
      </section>

      <!-- FOOTER -->
      <footer class="module bg-light">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <ul class="social-text-links font-alt text-center m-b-20">
                <li>
                  <a
                    href="https://github.com/vonds"
                    target="_blank"
                    rel="noopener"
                  >
                    Github
                  </a>
                </li>
                <li>
                  <a
                    href="https://www.linkedin.com/in/vonds/"
                    target="_blank"
                    rel="noopener"
                  >
                    Linkedin
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <p class="copyright text-center m-b-0">
                VONDS &copy;
                <span id="year"></span>
              </p>

              <div class="scroll-up">
                <a href="#totop"><i class="fa fa-angle-double-up"></i></a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Javascript files (your existing) -->
    <script src="../assets/js/jquery-2.2.4.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.css"></script>
    <script src="../assets/js/jquery.superslides.min.js"></script>
    <script src="../assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="../assets/js/jquery.magnific-popup.min.js"></script>
    <script src="../assets/js/owl.carousel.min.js"></script>
    <script src="../assets/js/jquery.simple-text-rotator.min.js"></script>
    <script src="../assets/js/imagesloaded.pkgd.js"></script>
    <script src="../assets/js/isotope.pkgd.min.js"></script>
    <script src="../assets/js/packery-mode.pkgd.min.js"></script>
    <script src="../assets/js/appear.js"></script>
    <script src="../assets/js/jquery.easing.1.3.js"></script>
    <script src="../assets/js/wow.min.js"></script>
    <script src="../assets/js/jqBootstrapValidation.js"></script>
    <script src="../assets/js/jquery.fitvids.js"></script>
    <script src="../assets/js/jquery.parallax-1.1.3.js"></script>
    <script src="../assets/js/smoothscroll.js"></script>
    <script src="../assets/js/custom.js"></script>

    <!-- Lab page JS (new) -->
    <script src="../assets/js/lab.js"></script>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear()
    </script>
  </body>
</html>
